{"remainingRequest":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\customer\\addEmailOrPhone.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\customer\\addEmailOrPhone.vue","mtime":1618367977437},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: \"addEmailOrPhone\",\n  props: {\n    email:\"\",\n    emailOrPhoneData:{\n      type:Object,\n      default:()=>({})\n    }\n  },\n  data(){\n    return {\n      rules:[],\n      maxlength:10,\n      addEmailOrPhoneDialogFlag:false,\n      title:\"\",\n      obj:{},\n      rowData:\"\",\n      dynamicValidateForm:{\n        domains: [{\n          value: ''\n        }],\n      },\n    }\n  },\n  methods: {\n    closeDialog() {\n      this.addEmailOrPhoneDialogFlag=false;\n      this.resetForm(\"dynamicValidateForm\");\n      this.dynamicValidateForm={\n        domains: []\n      };\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          var arrValue=[];\n          this.dynamicValidateForm.domains.forEach(item=>{\n            arrValue.push(item.value);\n          })\n          for (const key in arrValue) {\n            if(arrValue[key]==\"\"){\n              arrValue.splice(key,1);\n            }\n          }\n          this.obj.label==\"联系方式\"?this.rowData.contactPhone=arrValue.join(\",\"):this.rowData.contactEmail=arrValue.join(\",\");\n          this.closeDialog();\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.dynamicValidateForm={\n        domains: [{\n          value: ''\n        }]\n      };\n      // this.$refs[formName].resetFields();\n    },\n    removeDomain(item) {\n      var index = this.dynamicValidateForm.domains.indexOf(item)\n      if (index !== -1) {\n        this.dynamicValidateForm.domains.splice(index, 1)\n      }\n    },\n    addDomain() {\n      this.dynamicValidateForm.domains.push({\n        value: '',\n        key: Date.now()\n      });\n    },\n    openType(column,row){\n      this.addEmailOrPhoneDialogFlag=true;\n      this.obj=column;\n      this.rowData=row;\n      this.title=`新增${this.obj.label}`;\n      this.dynamicValidateForm.domains=[];\n      if (column.label=='联系方式'){\n        row.contactPhone.split(\",\").forEach(item=>{\n          this.dynamicValidateForm.domains.push({\n            value: item\n          });\n        })\n      }else {\n        row.contactEmail.split(\",\").forEach(item=>{\n          this.dynamicValidateForm.domains.push({\n            value: item\n          });\n        })\n      }\n      //验证\n      if (column.label=='联系方式'){\n        this.rules=[{\n          required: true, message:`${this.obj.label}不能为空`, trigger: 'blur'\n        }];\n        this.maxlength=20;\n      }else {\n        this.rules=[\n          { type: 'email', message: '请输入正确的邮箱地址', trigger: ['blur', 'change'] },\n          {\n            required: true, message:`${this.obj.label}不能为空`, trigger: 'blur'\n          }\n        ];\n        this.maxlength=50;\n      }\n\n    }\n  }\n  }\n\n",{"version":3,"sources":["addEmailOrPhone.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"addEmailOrPhone.vue","sourceRoot":"src/views/contract/customer","sourcesContent":["<template>\r\n  <el-dialog\r\n    :title=\"title\"\r\n    :visible.sync=\"addEmailOrPhoneDialogFlag\"\r\n    @close=\"closeDialog\"\r\n  >\r\n    <el-form :model=\"dynamicValidateForm\" ref=\"dynamicValidateForm\" label-width=\"100px\" >\r\n\r\n      <el-form-item\r\n        v-for=\"(domain, index) in dynamicValidateForm.domains\"\r\n        :label=\"obj.label\"\r\n        :key=\"domain.key\"\r\n        :prop=\"'domains.' + index + '.value'\"\r\n        :rules=\"rules\"\r\n      >\r\n        <el-col :span=\"11\">\r\n        <el-input  v-model=\"domain.value\" :maxlength=\"maxlength\" show-word-limit></el-input>\r\n        </el-col>\r\n        <el-col :span=\"1\"></el-col>\r\n        <el-col :span=\"10\">\r\n        <el-button @click.prevent=\"removeDomain(domain)\">删除</el-button>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm('dynamicValidateForm')\">提交</el-button>\r\n        <el-button @click=\"addDomain\">新增{{obj.label}}</el-button>\r\n        <el-button @click=\"resetForm('dynamicValidateForm')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"addEmailOrPhone\",\r\n    props: {\r\n      email:\"\",\r\n      emailOrPhoneData:{\r\n        type:Object,\r\n        default:()=>({})\r\n      }\r\n    },\r\n    data(){\r\n      return {\r\n        rules:[],\r\n        maxlength:10,\r\n        addEmailOrPhoneDialogFlag:false,\r\n        title:\"\",\r\n        obj:{},\r\n        rowData:\"\",\r\n        dynamicValidateForm:{\r\n          domains: [{\r\n            value: ''\r\n          }],\r\n        },\r\n      }\r\n    },\r\n    methods: {\r\n      closeDialog() {\r\n        this.addEmailOrPhoneDialogFlag=false;\r\n        this.resetForm(\"dynamicValidateForm\");\r\n        this.dynamicValidateForm={\r\n          domains: []\r\n        };\r\n      },\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            var arrValue=[];\r\n            this.dynamicValidateForm.domains.forEach(item=>{\r\n              arrValue.push(item.value);\r\n            })\r\n            for (const key in arrValue) {\r\n              if(arrValue[key]==\"\"){\r\n                arrValue.splice(key,1);\r\n              }\r\n            }\r\n            this.obj.label==\"联系方式\"?this.rowData.contactPhone=arrValue.join(\",\"):this.rowData.contactEmail=arrValue.join(\",\");\r\n            this.closeDialog();\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      resetForm(formName) {\r\n        this.dynamicValidateForm={\r\n          domains: [{\r\n            value: ''\r\n          }]\r\n        };\r\n        // this.$refs[formName].resetFields();\r\n      },\r\n      removeDomain(item) {\r\n        var index = this.dynamicValidateForm.domains.indexOf(item)\r\n        if (index !== -1) {\r\n          this.dynamicValidateForm.domains.splice(index, 1)\r\n        }\r\n      },\r\n      addDomain() {\r\n        this.dynamicValidateForm.domains.push({\r\n          value: '',\r\n          key: Date.now()\r\n        });\r\n      },\r\n      openType(column,row){\r\n        this.addEmailOrPhoneDialogFlag=true;\r\n        this.obj=column;\r\n        this.rowData=row;\r\n        this.title=`新增${this.obj.label}`;\r\n        this.dynamicValidateForm.domains=[];\r\n        if (column.label=='联系方式'){\r\n          row.contactPhone.split(\",\").forEach(item=>{\r\n            this.dynamicValidateForm.domains.push({\r\n              value: item\r\n            });\r\n          })\r\n        }else {\r\n          row.contactEmail.split(\",\").forEach(item=>{\r\n            this.dynamicValidateForm.domains.push({\r\n              value: item\r\n            });\r\n          })\r\n        }\r\n        //验证\r\n        if (column.label=='联系方式'){\r\n          this.rules=[{\r\n            required: true, message:`${this.obj.label}不能为空`, trigger: 'blur'\r\n          }];\r\n          this.maxlength=20;\r\n        }else {\r\n          this.rules=[\r\n            { type: 'email', message: '请输入正确的邮箱地址', trigger: ['blur', 'change'] },\r\n            {\r\n              required: true, message:`${this.obj.label}不能为空`, trigger: 'blur'\r\n            }\r\n          ];\r\n          this.maxlength=50;\r\n        }\r\n\r\n      }\r\n    }\r\n    }\r\n\r\n</script>\r\n"]}]}