{"remainingRequest":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\userAccount\\accountExportDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\userAccount\\accountExportDialog.vue","mtime":1618541026437},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {exportData} from \"@/api/contract/customer/orgcustomer\";\r\nimport qs from 'qs'\r\n\r\nconst PERSONAL_EXPORT_URL = \"/api/cnfic-contract-manage/personalaccount/export-personalaccount?\";\r\nconst ENTERPRISE_EXPORT_URL = \"/api/cnfic-contract-manage/enterpriseaccount/export-enterpriseaccount?\";\r\n\r\nexport default {\r\n  name: \"account-export-dialog\",\r\n  props: {\r\n    exportDialogFlag: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    type: {\r\n      type: String,\r\n      default: \"enterprise\",\r\n    },\r\n    exportColumns: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  mounted() {\r\n    for (let i = 0; i < this.columns.length; i++) {\r\n      this.column.push(this.columns[i].value);\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        exportField: [],\r\n        fieldName: [],\r\n        orderChecked: false,\r\n        contractChecked: false,\r\n        productChecked: false,\r\n      },\r\n      checkAll: false,\r\n      isIndeterminate: true,\r\n      column: [],\r\n      columns: [\r\n        {\r\n          label: '客户编码',\r\n          prop: 'custCode'\r\n        }, {\r\n          label: '客户名称',\r\n          prop: 'custName'\r\n        }, {\r\n          label: '上级单位',\r\n          prop: 'superUnitName'\r\n        }, {\r\n          label: '所属行业',\r\n          prop: 'custIndustryName'\r\n        }, {\r\n          label: '所属地域',\r\n          prop: 'regionName'\r\n        }, {\r\n          label: '客户类型',\r\n          prop: 'custTypeName'\r\n        }, {\r\n          label: '详细地址',\r\n          prop: 'custAddress'\r\n        }, {\r\n          label: '邮政编码',\r\n          prop: 'postcode'\r\n        }, {\r\n          label: '公司电话',\r\n          prop: 'comPhone'\r\n        }, {\r\n          label: '公司网址',\r\n          prop: 'comWebsite'\r\n        }, {\r\n          label: '客户状态',\r\n          prop: 'custStateName'\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    this.columns = this.exportColumns;\r\n    this.checkAll = false;\r\n    this.form = {\r\n      exportField: [],\r\n      fieldName: [],\r\n      orderChecked: false,\r\n      contractChecked: false,\r\n      productChecked: false,\r\n    };\r\n  },\r\n  methods: {\r\n    cancelDialog() {\r\n      this.checkAll = false;\r\n      this.form = {\r\n        exportField: [],\r\n        orderChecked: false,\r\n        contractChecked: false,\r\n        productChecked: false,\r\n      };\r\n      this.$emit('close');\r\n    },\r\n    exportData() {\r\n      var form = this.form;\r\n      let checkFlag = false, url = \"\";\r\n      if (this.type == 'personal') {\r\n        checkFlag = form.exportField.length == 0 && !form.orderChecked;\r\n        url = PERSONAL_EXPORT_URL;\r\n      } else {\r\n        checkFlag = form.exportField.length == 0 && !form.contractChecked && !form.productChecked;\r\n        url = ENTERPRISE_EXPORT_URL;\r\n      }\r\n      if (checkFlag) {\r\n        this.$message({\r\n          message: \"请选择要导出的列\",\r\n          type: \"error\"\r\n        });\r\n        return;\r\n      }\r\n      window.open(url + qs.stringify(this.form));\r\n      this.cancelDialog();\r\n    },\r\n    handleCheckAllChange(val) {\r\n      console.log(\"this.form.exportField\", this.form.exportField)\r\n      this.form.exportField = val ? this.columns.map(item => item.prop) : [];\r\n      this.form.fieldName = val ? this.columns.map(item => item.label) : [];\r\n      if (val) {\r\n        this.form.orderChecked = true;\r\n        this.form.contractChecked = true;\r\n        this.form.productChecked = true;\r\n      } else {\r\n        this.form.orderChecked = false;\r\n        this.form.contractChecked = false;\r\n        this.form.productChecked = false;\r\n      }\r\n      this.isIndeterminate = false;\r\n    },\r\n\r\n  }\r\n};\r\n",{"version":3,"sources":["accountExportDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"accountExportDialog.vue","sourceRoot":"src/views/contract/userAccount","sourcesContent":["<template>\r\n  <el-dialog\r\n    title=\"导出\"\r\n    :visible.sync=\"exportDialogFlag\"\r\n    width=\"80%\" center\r\n    @close=\"cancelDialog\">\r\n    <el-form ref=\"form\" :model=\"form\" label-width=\"180px\">\r\n      <el-form-item label=\"导出信息选择\">\r\n        <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\r\n        <div style=\"margin: 15px 0;\"></div>\r\n        <el-checkbox-group v-model=\"form.exportField\">\r\n          <el-checkbox v-for=\"item in columns\" :label=\"item.prop\" :key=\"item.prop\">{{item.label}}</el-checkbox>\r\n        </el-checkbox-group>\r\n      </el-form-item>\r\n      <el-divider></el-divider>\r\n      <div v-if=\"type == 'personal'\">\r\n        <el-form-item>\r\n          <el-checkbox v-model=\"form.orderChecked\">订单信息</el-checkbox>\r\n        </el-form-item>\r\n      </div>\r\n      <div v-if=\"type=='enterprise'\">\r\n        <el-form-item>\r\n          <el-checkbox v-model=\"form.contractChecked\">合约信息（合约编码、合约名称、合约状态、合约起止时间）</el-checkbox>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-checkbox v-model=\"form.productChecked\">产品信息（账号访问产品权限列表）</el-checkbox>\r\n        </el-form-item>\r\n      </div>\r\n    </el-form>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button type=\"primary\" @click=\"exportData\">确 定</el-button>\r\n      <el-button @click=\"cancelDialog\">取 消</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {exportData} from \"@/api/contract/customer/orgcustomer\";\r\nimport qs from 'qs'\r\n\r\nconst PERSONAL_EXPORT_URL = \"/api/cnfic-contract-manage/personalaccount/export-personalaccount?\";\r\nconst ENTERPRISE_EXPORT_URL = \"/api/cnfic-contract-manage/enterpriseaccount/export-enterpriseaccount?\";\r\n\r\nexport default {\r\n  name: \"account-export-dialog\",\r\n  props: {\r\n    exportDialogFlag: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    type: {\r\n      type: String,\r\n      default: \"enterprise\",\r\n    },\r\n    exportColumns: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  mounted() {\r\n    for (let i = 0; i < this.columns.length; i++) {\r\n      this.column.push(this.columns[i].value);\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        exportField: [],\r\n        fieldName: [],\r\n        orderChecked: false,\r\n        contractChecked: false,\r\n        productChecked: false,\r\n      },\r\n      checkAll: false,\r\n      isIndeterminate: true,\r\n      column: [],\r\n      columns: [\r\n        {\r\n          label: '客户编码',\r\n          prop: 'custCode'\r\n        }, {\r\n          label: '客户名称',\r\n          prop: 'custName'\r\n        }, {\r\n          label: '上级单位',\r\n          prop: 'superUnitName'\r\n        }, {\r\n          label: '所属行业',\r\n          prop: 'custIndustryName'\r\n        }, {\r\n          label: '所属地域',\r\n          prop: 'regionName'\r\n        }, {\r\n          label: '客户类型',\r\n          prop: 'custTypeName'\r\n        }, {\r\n          label: '详细地址',\r\n          prop: 'custAddress'\r\n        }, {\r\n          label: '邮政编码',\r\n          prop: 'postcode'\r\n        }, {\r\n          label: '公司电话',\r\n          prop: 'comPhone'\r\n        }, {\r\n          label: '公司网址',\r\n          prop: 'comWebsite'\r\n        }, {\r\n          label: '客户状态',\r\n          prop: 'custStateName'\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    this.columns = this.exportColumns;\r\n    this.checkAll = false;\r\n    this.form = {\r\n      exportField: [],\r\n      fieldName: [],\r\n      orderChecked: false,\r\n      contractChecked: false,\r\n      productChecked: false,\r\n    };\r\n  },\r\n  methods: {\r\n    cancelDialog() {\r\n      this.checkAll = false;\r\n      this.form = {\r\n        exportField: [],\r\n        orderChecked: false,\r\n        contractChecked: false,\r\n        productChecked: false,\r\n      };\r\n      this.$emit('close');\r\n    },\r\n    exportData() {\r\n      var form = this.form;\r\n      let checkFlag = false, url = \"\";\r\n      if (this.type == 'personal') {\r\n        checkFlag = form.exportField.length == 0 && !form.orderChecked;\r\n        url = PERSONAL_EXPORT_URL;\r\n      } else {\r\n        checkFlag = form.exportField.length == 0 && !form.contractChecked && !form.productChecked;\r\n        url = ENTERPRISE_EXPORT_URL;\r\n      }\r\n      if (checkFlag) {\r\n        this.$message({\r\n          message: \"请选择要导出的列\",\r\n          type: \"error\"\r\n        });\r\n        return;\r\n      }\r\n      window.open(url + qs.stringify(this.form));\r\n      this.cancelDialog();\r\n    },\r\n    handleCheckAllChange(val) {\r\n      console.log(\"this.form.exportField\", this.form.exportField)\r\n      this.form.exportField = val ? this.columns.map(item => item.prop) : [];\r\n      this.form.fieldName = val ? this.columns.map(item => item.label) : [];\r\n      if (val) {\r\n        this.form.orderChecked = true;\r\n        this.form.contractChecked = true;\r\n        this.form.productChecked = true;\r\n      } else {\r\n        this.form.orderChecked = false;\r\n        this.form.contractChecked = false;\r\n        this.form.productChecked = false;\r\n      }\r\n      this.isIndeterminate = false;\r\n    },\r\n\r\n  }\r\n};\r\n</script>\r\n"]}]}