{"remainingRequest":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\user\\info.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\user\\info.vue","mtime":1618367977466},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport option from \"@/const/user/info\";\r\nimport {getUserInfo, update, updatePassword} from \"@/api/system/user\";\r\nimport func from \"@/util/func\";\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      index: 0,\r\n      option: option,\r\n      form: {}\r\n    };\r\n  },\r\n  created() {\r\n    this.handleWitch();\r\n  },\r\n  methods: {\r\n    handleSubmit(form, done) {\r\n      if (this.index === 0) {\r\n        update(form).then(res => {\r\n          if (res.data.code == 200) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: res.data.msg + \"，请重新登录!\"\r\n            });\r\n            //修改信息后需退出重新登录\r\n            this.handleLogOut();\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.data.msg\r\n            });\r\n          }\r\n          done();\r\n        }, error => {\r\n          window.console.log(error);\r\n          done();\r\n        })\r\n      } else {\r\n        updatePassword(form.oldPassword, form.newPassword, form.newPassword1).then(res => {\r\n          if (res.data.code == 200) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: res.data.msg + \"，请重新登录!\"\r\n            });\r\n            //修改信息后需退出重新登录\r\n            this.handleLogOut();\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.data.msg\r\n            });\r\n          }\r\n          done();\r\n        }, error => {\r\n          window.console.log(error);\r\n          done();\r\n        })\r\n      }\r\n    },\r\n    handleLogOut() {\r\n      setTimeout(() => {\r\n        this.$store.dispatch(\"LogOut\").then(() => {\r\n          this.$router.push({path: \"/login\"});\r\n        });\r\n      }, 2000);\r\n    },\r\n    handleWitch() {\r\n      if (this.index === 0) {\r\n        getUserInfo().then(res => {\r\n          const user = res.data.data;\r\n          this.form = {\r\n            id: user.id,\r\n            avatar: user.avatar,\r\n            name: user.name,\r\n            realName: user.realName,\r\n            phone: user.phone,\r\n            email: user.email,\r\n          }\r\n        });\r\n      }\r\n    },\r\n    handleTabClick(tabs) {\r\n      this.index = func.toInt(tabs.index);\r\n      this.handleWitch();\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["info.vue"],"names":[],"mappings":";;;;;;;;;;;;AAYA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"info.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n  <div>\r\n    <basic-container>\r\n      <avue-form :option=\"option\"\r\n                 v-model=\"form\"\r\n                 @tab-click=\"handleTabClick\"\r\n                 @submit=\"handleSubmit\"></avue-form>\r\n    </basic-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport option from \"@/const/user/info\";\r\nimport {getUserInfo, update, updatePassword} from \"@/api/system/user\";\r\nimport func from \"@/util/func\";\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      index: 0,\r\n      option: option,\r\n      form: {}\r\n    };\r\n  },\r\n  created() {\r\n    this.handleWitch();\r\n  },\r\n  methods: {\r\n    handleSubmit(form, done) {\r\n      if (this.index === 0) {\r\n        update(form).then(res => {\r\n          if (res.data.code == 200) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: res.data.msg + \"，请重新登录!\"\r\n            });\r\n            //修改信息后需退出重新登录\r\n            this.handleLogOut();\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.data.msg\r\n            });\r\n          }\r\n          done();\r\n        }, error => {\r\n          window.console.log(error);\r\n          done();\r\n        })\r\n      } else {\r\n        updatePassword(form.oldPassword, form.newPassword, form.newPassword1).then(res => {\r\n          if (res.data.code == 200) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: res.data.msg + \"，请重新登录!\"\r\n            });\r\n            //修改信息后需退出重新登录\r\n            this.handleLogOut();\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.data.msg\r\n            });\r\n          }\r\n          done();\r\n        }, error => {\r\n          window.console.log(error);\r\n          done();\r\n        })\r\n      }\r\n    },\r\n    handleLogOut() {\r\n      setTimeout(() => {\r\n        this.$store.dispatch(\"LogOut\").then(() => {\r\n          this.$router.push({path: \"/login\"});\r\n        });\r\n      }, 2000);\r\n    },\r\n    handleWitch() {\r\n      if (this.index === 0) {\r\n        getUserInfo().then(res => {\r\n          const user = res.data.data;\r\n          this.form = {\r\n            id: user.id,\r\n            avatar: user.avatar,\r\n            name: user.name,\r\n            realName: user.realName,\r\n            phone: user.phone,\r\n            email: user.email,\r\n          }\r\n        });\r\n      }\r\n    },\r\n    handleTabClick(tabs) {\r\n      this.index = func.toInt(tabs.index);\r\n      this.handleWitch();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}