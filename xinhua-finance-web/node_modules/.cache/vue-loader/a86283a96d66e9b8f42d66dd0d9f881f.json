{"remainingRequest":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\product\\group\\price-dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\product\\group\\price-dialog.vue","mtime":1618541026424},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport transferSimple from \"@/components/transfer/index-simple\";\r\nimport {getValuations} from \"@/api/contract/product/productitem\";\r\n\r\nexport default {\r\n  components:{transferSimple},\r\n  name:\"priceDialog\",\r\n  props:{\r\n    dialogTitle:\"\",\r\n    dialogOpen:false,\r\n    dialogForm:{\r\n      prodName:'',\r\n      prodType:'',\r\n      prodId:'',\r\n      type:''\r\n    }\r\n  },\r\n  data(){\r\n      return {\r\n        selections:[],\r\n        columns:[{\r\n          prop: \"standardPrice\",\r\n          label:\"标准价\"\r\n        },{\r\n          prop: \"promotionPrice\",\r\n          label:\"促销价\"\r\n        },{\r\n          prop: \"currencyName\",\r\n          label:\"币种\"\r\n        }],\r\n        initList:[],\r\n        prodList:[]\r\n      }\r\n  },\r\n  watch:{\r\n    'dialogOpen'(){\r\n      if(this.dialogOpen === true){\r\n        this.prodList=[];\r\n        this.columns=[{\r\n          prop: \"standardPrice\",\r\n          label:\"标准价\"\r\n        },{\r\n          prop: \"promotionPrice\",\r\n          label:\"促销价\"\r\n        },{\r\n          prop: \"currencyName\",\r\n          label:\"币种\"\r\n        }];\r\n        this.queryList();\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    queryList(){\r\n      getValuations(this.dialogForm).then(res => {\r\n        const data = res.data.data;\r\n        if(data){\r\n          let flag = true\r\n          for(let obj of data){\r\n            for(let val of JSON.parse(obj.valuationValues)){\r\n              if(flag){\r\n                flag = false\r\n                this.columns.unshift({prop:val.propCode, label:val.propName})\r\n              }\r\n              obj[val.propCode]=val.propValue\r\n            }\r\n          }\r\n        }\r\n        this.initList = data;\r\n      });\r\n    },\r\n    cancelPriceDialog(){\r\n      this.$emit('cancel');\r\n    },\r\n    selectionChange(selection){\r\n      this.selections = selection\r\n    },\r\n    savePrice(){\r\n      if(this.selections && this.selections.length == 1){\r\n         this.$emit('result', this.selections[0]);\r\n      }else{\r\n        // 请选择数据 且只能选择一条数据\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请选择一条数据!\"\r\n        });\r\n        return \r\n      }\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["price-dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"price-dialog.vue","sourceRoot":"src/views/contract/product/group","sourcesContent":["<template>\r\n  <el-dialog\r\n    :title=\"dialogTitle\"\r\n    :visible.sync=\"dialogOpen\"\r\n    :show-close=false\r\n    width=\"80%\"\r\n    >\r\n    <template>\r\n      <el-form :inline=\"true\" ref=\"dialogForms\" :model=\"dialogForm\" size='mini' class=\"demo-form-inline\">\r\n        <el-form-item label=\"产品名称\">\r\n          <el-input v-model=\"dialogForm.prodName\" placeholder=\"请输入产品名称\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"应用分类\">\r\n          <el-select ref=\"prodType\" style=\"width:100%\" :disabled=\"isView\" size=\"small\" v-model=\"dialogForm.prodType\"  filterable  placeholder=\"请选择应用分类\"> \r\n            <el-option v-for=\"(item,i) in prodTypes\" :key=\"i\" :label=\"item.dictValue\" :value=\"item.dictKey\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"queryList\">查询</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <transfer-simple :leftList=\"initList\" :checkbox=\"true\"\r\n        :columns=\"columns\" @selectionChange=\"selectionChange\" ></transfer-simple>\r\n    </template>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"cancelPriceDialog\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"savePrice\">确 定</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport transferSimple from \"@/components/transfer/index-simple\";\r\nimport {getValuations} from \"@/api/contract/product/productitem\";\r\n\r\nexport default {\r\n  components:{transferSimple},\r\n  name:\"priceDialog\",\r\n  props:{\r\n    dialogTitle:\"\",\r\n    dialogOpen:false,\r\n    dialogForm:{\r\n      prodName:'',\r\n      prodType:'',\r\n      prodId:'',\r\n      type:''\r\n    }\r\n  },\r\n  data(){\r\n      return {\r\n        selections:[],\r\n        columns:[{\r\n          prop: \"standardPrice\",\r\n          label:\"标准价\"\r\n        },{\r\n          prop: \"promotionPrice\",\r\n          label:\"促销价\"\r\n        },{\r\n          prop: \"currencyName\",\r\n          label:\"币种\"\r\n        }],\r\n        initList:[],\r\n        prodList:[]\r\n      }\r\n  },\r\n  watch:{\r\n    'dialogOpen'(){\r\n      if(this.dialogOpen === true){\r\n        this.prodList=[];\r\n        this.columns=[{\r\n          prop: \"standardPrice\",\r\n          label:\"标准价\"\r\n        },{\r\n          prop: \"promotionPrice\",\r\n          label:\"促销价\"\r\n        },{\r\n          prop: \"currencyName\",\r\n          label:\"币种\"\r\n        }];\r\n        this.queryList();\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    queryList(){\r\n      getValuations(this.dialogForm).then(res => {\r\n        const data = res.data.data;\r\n        if(data){\r\n          let flag = true\r\n          for(let obj of data){\r\n            for(let val of JSON.parse(obj.valuationValues)){\r\n              if(flag){\r\n                flag = false\r\n                this.columns.unshift({prop:val.propCode, label:val.propName})\r\n              }\r\n              obj[val.propCode]=val.propValue\r\n            }\r\n          }\r\n        }\r\n        this.initList = data;\r\n      });\r\n    },\r\n    cancelPriceDialog(){\r\n      this.$emit('cancel');\r\n    },\r\n    selectionChange(selection){\r\n      this.selections = selection\r\n    },\r\n    savePrice(){\r\n      if(this.selections && this.selections.length == 1){\r\n         this.$emit('result', this.selections[0]);\r\n      }else{\r\n        // 请选择数据 且只能选择一条数据\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请选择一条数据!\"\r\n        });\r\n        return \r\n      }\r\n    }\r\n  }\r\n}\r\n</script>"]}]}