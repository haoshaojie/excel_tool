{"remainingRequest":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\contract\\components\\contractExportDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\contract\\components\\contractExportDialog.vue","mtime":1618891349837},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport website from \"@/config/website\";\nimport {getToken} from '@/util/auth';\nimport qs from 'qs'\nexport default {\n  name: \"customer-export-dialog\",\n  props: {\n    exportDialogFlag: {\n      type: Boolean,\n      default: false\n    },\n    searchCondition:{\n      type:Object\n    },\n    selectedRows:{\n      type:Object\n    }\n  },\n  mounted() {\n    for (let i = 0; i < this.columns.length; i++) {\n      this.column.push(this.columns[i].value);\n    }\n  },\n  data() {\n    return {\n      form:{\n        selectColumn: [],\n        linkmanInfoChecked:false,\n        contactInfoChecked:false,\n        userInfoChecked:false,\n        selectedRow:[]\n      },\n      checkAll: false,\n      isIndeterminate: true,\n      column:[],\n      columns : [{\n        name:'合约编码',\n        value:'conNo',\n      },{\n        name:'合约名称',\n        value:'conName',\n      },{\n        name:'合约范围',\n        value:'conLimit'\n      },{\n        name:'合约类型',\n        value:'conType',\n      },{\n        name:'合约状态',\n        value:'conState',\n      },{\n        name:'所属部门',\n        value:'deptId'\n      },{\n        name:'客户编号',\n        value:'custCode',\n      },{\n        name:'客户名称',\n        value:'custName',\n      },{\n        name:'签约乙方',\n        value:'conPartb',\n      },{\n        name:'签约状态',\n        value:'signState',\n        checked:true\n      },{\n        name:'签约日期',\n        value:'signDate'\n      },{\n        name:'合约起始日期',\n        value:'conStartTime'\n      },{\n        name:'合约终止日期',\n        value:'conEndTime'\n      },{\n        name:'合约金额',\n        value:'conAmount'\n      },{\n        name:'合约当年期金额',\n        value:'conCurrAmount'\n      },{\n        name:'具体服务要求',\n        value:'conDemand'\n      },{\n        name:'创建人',\n        value:'createUser'\n      },\n      {\n        name:'创建时间',\n        value:'createTime'\n      },\n      {\n        name:'最后修改人',\n        value:'updateUser'\n      },\n      {\n        name:'最后修改时间',\n        value:'updateTime'\n      },\n      ],\n    };\n  },\n  methods: {\n    cancelDialog() {\n      this.$emit('cancel');\n    },\n    init(){\n      // 组件初始化页面展示\n      this.form.selectColumn = ['conNo','conName','conType','conState','custCode','conPartb','custName'];\n      this.form.linkmanInfoChecked=false;\n      this.form.contactInfoChecked=false;\n      this.form.userInfoChecked=false;\n      this.checkAll=false;\n      // 继承查询条件属性\n      for (let pro in this.searchCondition) {\n        if(this.searchCondition[pro] != null && this.searchCondition[pro] != undefined) {\n          if(!(pro.indexOf(\"$\")>= 0)){\n              this.form[pro] = this.searchCondition[pro];\n          }\n        }\n      }\n      for(let id in this.selectedRows) {\n        this.form.selectedRow.push(id);\n      }\n    },\n    exportData(){\n      var form=this.form;\n      if (form.selectColumn.length==0&&!form.linkmanInfoChecked&&!form.contactInfoChecked&&!form.userInfoChecked){\n        this.$message({\n          message: \"请选择要导出的列\",\n          type: \"error\"\n        });\n        return;\n      }\n      window.open(`/api/cnfic-contract-manage/contract/export?${qs.stringify(this.form)}&${website.tokenHeader}=${getToken()}`);\n      this.cancelDialog();\n    },\n    handleCheckAllChange(val) {\n      this.form.selectColumn = val ? this.columns.map(item => item.value): [];\n      if (val){\n        this.form.linkmanInfoChecked=true;\n        this.form.contactInfoChecked=true;\n        this.form.userInfoChecked=true;\n      } else {\n        this.form.linkmanInfoChecked=false;\n        this.form.contactInfoChecked=false;\n        this.form.userInfoChecked=false;\n      }\n      this.isIndeterminate = false;\n    },\n\n  }\n};\n",{"version":3,"sources":["contractExportDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"contractExportDialog.vue","sourceRoot":"src/views/contract/contract/components","sourcesContent":["<template>\n  <el-dialog\n    title=\"导出\"\n    :visible.sync=\"exportDialogFlag\"\n    width=\"80%\"\n    @close=\"cancelDialog\"\n    @open=\"init\">\n    <el-form ref=\"form\" :model=\"form\" label-width=\"180px\" >\n      <el-form-item label=\"导出信息选择\">\n        <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\n        <div style=\"margin: 15px 0;\"></div>\n        <el-checkbox-group v-model=\"form.selectColumn\" >\n          <el-checkbox v-for=\"item in columns\" :label=\"item.value\" :key=\"item.value\" :checked=\"item.checked\">{{item.name}}</el-checkbox>\n        </el-checkbox-group>\n      </el-form-item>\n      <el-divider></el-divider>\n      <el-form-item label=\"\">\n        <el-checkbox v-model=\"form.linkmanInfoChecked\">联系人信息</el-checkbox>\n      </el-form-item>\n      <el-form-item label=\"\">\n        <el-checkbox v-model=\"form.contactInfoChecked\">产品信息（合约下的合约信息）</el-checkbox>\n      </el-form-item>\n      <el-form-item label=\"\">\n        <el-checkbox v-model=\"form.userInfoChecked\">用户信息（合约下的用户信息）</el-checkbox>\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n  <el-button type=\"primary\" @click=\"exportData\">确 定</el-button>\n  <el-button @click=\"cancelDialog\">取 消</el-button>\n  </span>\n  </el-dialog>\n</template>\n\n<script>\n  import website from \"@/config/website\";\n  import {getToken} from '@/util/auth';\n  import qs from 'qs'\n  export default {\n    name: \"customer-export-dialog\",\n    props: {\n      exportDialogFlag: {\n        type: Boolean,\n        default: false\n      },\n      searchCondition:{\n        type:Object\n      },\n      selectedRows:{\n        type:Object\n      }\n    },\n    mounted() {\n      for (let i = 0; i < this.columns.length; i++) {\n        this.column.push(this.columns[i].value);\n      }\n    },\n    data() {\n      return {\n        form:{\n          selectColumn: [],\n          linkmanInfoChecked:false,\n          contactInfoChecked:false,\n          userInfoChecked:false,\n          selectedRow:[]\n        },\n        checkAll: false,\n        isIndeterminate: true,\n        column:[],\n        columns : [{\n          name:'合约编码',\n          value:'conNo',\n        },{\n          name:'合约名称',\n          value:'conName',\n        },{\n          name:'合约范围',\n          value:'conLimit'\n        },{\n          name:'合约类型',\n          value:'conType',\n        },{\n          name:'合约状态',\n          value:'conState',\n        },{\n          name:'所属部门',\n          value:'deptId'\n        },{\n          name:'客户编号',\n          value:'custCode',\n        },{\n          name:'客户名称',\n          value:'custName',\n        },{\n          name:'签约乙方',\n          value:'conPartb',\n        },{\n          name:'签约状态',\n          value:'signState',\n          checked:true\n        },{\n          name:'签约日期',\n          value:'signDate'\n        },{\n          name:'合约起始日期',\n          value:'conStartTime'\n        },{\n          name:'合约终止日期',\n          value:'conEndTime'\n        },{\n          name:'合约金额',\n          value:'conAmount'\n        },{\n          name:'合约当年期金额',\n          value:'conCurrAmount'\n        },{\n          name:'具体服务要求',\n          value:'conDemand'\n        },{\n          name:'创建人',\n          value:'createUser'\n        },\n        {\n          name:'创建时间',\n          value:'createTime'\n        },\n        {\n          name:'最后修改人',\n          value:'updateUser'\n        },\n        {\n          name:'最后修改时间',\n          value:'updateTime'\n        },\n        ],\n      };\n    },\n    methods: {\n      cancelDialog() {\n        this.$emit('cancel');\n      },\n      init(){\n        // 组件初始化页面展示\n        this.form.selectColumn = ['conNo','conName','conType','conState','custCode','conPartb','custName'];\n        this.form.linkmanInfoChecked=false;\n        this.form.contactInfoChecked=false;\n        this.form.userInfoChecked=false;\n        this.checkAll=false;\n        // 继承查询条件属性\n        for (let pro in this.searchCondition) {\n          if(this.searchCondition[pro] != null && this.searchCondition[pro] != undefined) {\n            if(!(pro.indexOf(\"$\")>= 0)){\n                this.form[pro] = this.searchCondition[pro];\n            }\n          }\n        }\n        for(let id in this.selectedRows) {\n          this.form.selectedRow.push(id);\n        }\n      },\n      exportData(){\n        var form=this.form;\n        if (form.selectColumn.length==0&&!form.linkmanInfoChecked&&!form.contactInfoChecked&&!form.userInfoChecked){\n          this.$message({\n            message: \"请选择要导出的列\",\n            type: \"error\"\n          });\n          return;\n        }\n        window.open(`/api/cnfic-contract-manage/contract/export?${qs.stringify(this.form)}&${website.tokenHeader}=${getToken()}`);\n        this.cancelDialog();\n      },\n      handleCheckAllChange(val) {\n        this.form.selectColumn = val ? this.columns.map(item => item.value): [];\n        if (val){\n          this.form.linkmanInfoChecked=true;\n          this.form.contactInfoChecked=true;\n          this.form.userInfoChecked=true;\n        } else {\n          this.form.linkmanInfoChecked=false;\n          this.form.contactInfoChecked=false;\n          this.form.userInfoChecked=false;\n        }\n        this.isIndeterminate = false;\n      },\n\n    }\n  };\n</script>\n"]}]}