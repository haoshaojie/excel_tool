{"remainingRequest":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\userAccount\\personaluser.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\userAccount\\personaluser.vue","mtime":1618541026440},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"F:/\\u4E1C\\u65B9\\u901A/source/b_zwj/xinhua-finance-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getList, getPersonalDetail } from \"@/api/contract/userAccount/personaluser\";\nimport { resetLock, update } from \"@/api/contract/userAccount/account\";\nimport { mapGetters } from \"vuex\";\nimport userDetailDialog from \"./userDetailDialog\";\nimport resetPasswordDialog from \"./resetPasswordDialog\";\nimport accountExportDialog from \"./accountExportDialog\";\nexport default {\n  components: {\n    userDetailDialog: userDetailDialog,\n    resetPasswordDialog: resetPasswordDialog,\n    accountExportDialog: accountExportDialog\n  },\n  data: function data() {\n    return {\n      showExportDialog: false,\n      exportColumns: [],\n      showDetail: false,\n      accPersonalDetail: {},\n      showResetPasswordDialog: false,\n      accountId: \"\",\n      hasPhone: false,\n      hasEmail: false,\n      form: {},\n      query: {},\n      loading: true,\n      page: {\n        pageSize: 10,\n        currentPage: 1,\n        total: 0\n      },\n      selectionList: [],\n      createTimeArr: [],\n      updateTimeArr: [],\n      option: {\n        height: 'auto',\n        calcHeight: 210,\n        searchShow: true,\n        searchMenuSpan: 6,\n        tip: false,\n        border: true,\n        index: false,\n        viewBtn: false,\n        selection: true,\n        addBtn: false,\n        editBtn: true,\n        delBtn: false,\n        column: [{\n          label: \"账号ID\",\n          prop: \"accId\",\n          hide: true,\n          addDisplay: false,\n          editDisplay: false\n        }, {\n          label: \"手机号码\",\n          prop: \"userPhone\",\n          search: true,\n          rules: [{\n            required: true,\n            message: \"请输入手机号\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: \"邮箱\",\n          prop: \"userEmail\",\n          search: true,\n          rules: [{\n            required: true,\n            message: \"请输入邮箱\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: \"姓名\",\n          prop: \"userName\",\n          editDisabled: true\n        }, {\n          label: \"注册渠道\",\n          prop: \"regAppChannelType\",\n          search: true,\n          type: \"select\",\n          dicUrl: this.getDicValue(this.CONSTANT.REGAPP_CHANNEL_TYPE),\n          props: {\n            label: \"dictValue\",\n            value: \"dictKey\"\n          },\n          order: 6,\n          editDisabled: true\n        }, {\n          label: \"注册时间\",\n          prop: \"createTime\",\n          searchslot: true,\n          search: true,\n          editDisabled: true\n        }, {\n          label: \"账号状态\",\n          prop: \"accStatus\",\n          search: true,\n          type: \"select\",\n          dicUrl: this.getDicValue(this.CONSTANT.ACC_STATUS),\n          props: {\n            label: \"dictValue\",\n            value: \"dictKey\"\n          },\n          order: 6,\n          editDisabled: true,\n          dataType: 'number'\n        }, {\n          label: \"修改时间\",\n          prop: \"updateTime\",\n          searchslot: true,\n          search: true,\n          display: false,\n          hide: true\n        }]\n      },\n      data: [{\n        \"userNickname\": \"XHCJ0001\",\n        \"email\": \"18410379896\",\n        \"phone\": \"18410379896\",\n        nickName: \"\",\n        userName: \"\",\n        customerName: \"\",\n        userState: \"\",\n        accountState: \"\",\n        createTime: \"\",\n        updateTime: \"\"\n      }]\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters([\"permission\"])), {}, {\n    permissionList: function permissionList() {\n      return {\n        addBtn: this.vaildData(this.permission.personaluser_add, false),\n        viewBtn: this.vaildData(this.permission.personaluser_view, false),\n        delBtn: this.vaildData(this.permission.personaluser_delete, false),\n        editBtn: this.vaildData(this.permission.personaluser_edit, false)\n      };\n    },\n    ids: function ids() {\n      var ids = [];\n      this.selectionList.forEach(function (ele) {\n        ids.push(ele.id);\n      });\n      return ids.join(\",\");\n    }\n  }),\n  created: function created() {\n    var _this = this;\n\n    this.option.column.forEach(function (item) {\n      if (!item.hide) {\n        _this.exportColumns.push({\n          label: item.label,\n          prop: item.prop\n        });\n      }\n    });\n  },\n  methods: {\n    queryPersonalDetail: function queryPersonalDetail(accId) {\n      var _this2 = this;\n\n      if (accId && accId.length > 0) {\n        getPersonalDetail(accId).then(function (res) {\n          _this2.accPersonalDetail = res.data.data;\n          _this2.showDetail = true;\n        }, function (error) {\n          _this2.showDetail = false;\n          window.console.log(error);\n        });\n      }\n    },\n    showAccountDetail: function showAccountDetail(row) {\n      this.queryPersonalDetail(row.accId);\n    },\n    closeDetailDialog: function closeDetailDialog() {\n      this.showDetail = false;\n    },\n    closeExportDialog: function closeExportDialog() {\n      this.showExportDialog = false;\n      this.exportColumns = [];\n    },\n    handleLockOrUnlock: function handleLockOrUnlock(row) {\n      var _this3 = this;\n\n      var message = \"\",\n          flag = false;\n\n      if (row.accStatus == 1) {\n        message = \"确认锁定该账号吗？\";\n        flag = true;\n      } else if (row.accStatus == 2) {\n        message = \"确认解锁该账号吗\";\n        flag = false;\n      } else {\n        return;\n      }\n\n      this.$confirm(message, {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        return resetLock({\n          flag: flag,\n          accId: row.accId\n        });\n      }).then(function () {\n        _this3.onLoad(_this3.page);\n\n        _this3.$message({\n          type: \"success\",\n          message: \"操作成功!\"\n        });\n      });\n    },\n    resetPassword: function resetPassword(row) {\n      this.showResetPasswordDialog = true;\n\n      if (typeof row.userPhone == 'string' && row.userPhone.length > 0) {\n        this.hasPhone = true;\n      }\n\n      if (typeof row.userEmail == 'string' && row.userEmail.length > 0) {\n        this.hasEmail = true;\n      }\n\n      this.accountId = row.accId;\n    },\n    closeResetPasswordDialog: function closeResetPasswordDialog() {\n      this.showResetPasswordDialog = false;\n      this.accountId = null;\n      this.hasPhone = false;\n      this.hasEmail = false;\n    },\n    rowUpdate: function rowUpdate(row, index, done, loading) {\n      var _this4 = this;\n\n      update(row).then(function () {\n        done();\n\n        _this4.onLoad(_this4.page);\n\n        _this4.$message({\n          type: \"success\",\n          message: \"操作成功!\"\n        });\n      }, function (error) {\n        window.console.log(error);\n        loading();\n      });\n    },\n    handleExport: function handleExport() {\n      this.showExportDialog = true;\n    },\n    beforeOpen: function beforeOpen(done, type) {\n      var _this5 = this;\n\n      if ([\"edit\", \"view\"].includes(type)) {\n        console.log(\"detailForm\", this.form);\n        getPersonalDetail(this.form.accId).then(function (res) {\n          done();\n          _this5.form = res.data.data;\n        }, function (error) {\n          window.console.log(error);\n\n          _this5.onLoad(_this5.page);\n        });\n      } else {\n        done();\n      }\n    },\n    searchReset: function searchReset() {\n      this.query = {};\n      this.createTimeArr = [];\n      this.updateTimeArr = [];\n      this.onLoad(this.page);\n    },\n    searchChange: function searchChange(params, done) {\n      this.query = params;\n\n      if (this.createTimeArr) {\n        this.query.startRegistTime = this.createTimeArr[0];\n        this.query.endRegistTime = this.createTimeArr[1];\n      }\n\n      if (this.updateTimeArr) {\n        this.query.startUpdateTime = this.updateTimeArr[0];\n        this.query.endUpdateTime = this.updateTimeArr[1];\n      }\n\n      this.page.currentPage = 1;\n      this.onLoad(this.page, params);\n      done();\n    },\n    selectionChange: function selectionChange(list) {\n      this.selectionList = list;\n    },\n    selectionClear: function selectionClear() {\n      this.selectionList = [];\n      this.$refs.crud.toggleSelection();\n    },\n    currentChange: function currentChange(currentPage) {\n      this.page.currentPage = currentPage;\n    },\n    sizeChange: function sizeChange(pageSize) {\n      this.page.pageSize = pageSize;\n    },\n    onLoad: function onLoad(page) {\n      var _this6 = this;\n\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.loading = true;\n      getList(page.currentPage, page.pageSize, Object.assign(params, this.query)).then(function (res) {\n        var data = res.data.data;\n        _this6.page.total = data.total;\n        _this6.data = data.records;\n        _this6.loading = false;\n\n        _this6.selectionClear();\n      });\n    }\n  }\n};",{"version":3,"sources":["personaluser.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <basic-container>\r\n    <avue-crud :option=\"option\"\r\n               :table-loading=\"loading\"\r\n               :search.sync=\"search\"\r\n               :data=\"data\"\r\n               :page.sync=\"page\"\r\n               :permission=\"permissionList\"\r\n               :before-open=\"beforeOpen\"\r\n               v-model=\"form\"\r\n               ref=\"crud\"\r\n               @row-update=\"rowUpdate\"\r\n               @search-change=\"searchChange\"\r\n               @search-reset=\"searchReset\"\r\n               @selection-change=\"selectionChange\"\r\n               @current-change=\"currentChange\"\r\n               @size-change=\"sizeChange\"\r\n               @on-load=\"onLoad\">\r\n      <template slot=\"menuLeft\">\r\n        <el-button type=\"primary\"\r\n                   size=\"small\"\r\n                   icon=\"el-icon-download\"\r\n                   plain\r\n                   v-if=\"\"\r\n                   @click=\"handleExport\">导 出\r\n        </el-button>\r\n      </template>\r\n      <template slot-scope=\"scope\" slot=\"menu\">\r\n        <el-button type=\"text\" size=\"small\" @click.native=\"handleLockOrUnlock(scope.row)\">\r\n          {{scope.row.accStatus==1 ? \"锁定\":\"\"}}\r\n          {{scope.row.accStatus==2 ? \"解锁\":\"\"}}\r\n        </el-button>\r\n        <el-button type=\"text\" size=\"small\" @click.native=\"resetPassword(scope.row)\">重置密码</el-button>\r\n        <el-button type=\"text\" size=\"small\" @click.native=\"showAccountDetail(scope.row)\">详情</el-button>\r\n      </template>\r\n      <template slot-scope=\"{disabled,size}\" slot=\"createTimeSearch\">\r\n        <el-date-picker\r\n          v-model=\"createTimeArr\"\r\n          type=\"daterange\"\r\n          value-format=\"yyyy-MM-dd\"\r\n          format=\"yyyy-MM-dd\"\r\n          range-separator=\"-\"\r\n          start-placeholder=\"开始日期\"\r\n          end-placeholder=\"结束日期\">\r\n        </el-date-picker>\r\n      </template>\r\n      <template slot-scope=\"{disabled,size}\" slot=\"updateTimeSearch\">\r\n        <el-date-picker\r\n          v-model=\"updateTimeArr\"\r\n          type=\"daterange\"\r\n          value-format=\"yyyy-MM-dd\"\r\n          format=\"yyyy-MM-dd\"\r\n          range-separator=\"-\"\r\n          start-placeholder=\"开始日期\"\r\n          end-placeholder=\"结束日期\">\r\n        </el-date-picker>\r\n      </template>\r\n    </avue-crud>\r\n    <user-detail-dialog ref=\"userDetaildialog\" type=\"personal\"\r\n                        :showDetail=\"showDetail\"\r\n                        :personal-account-detail=\"accPersonalDetail\"\r\n                        @close=\"closeDetailDialog\"/>\r\n    <reset-password-dialog ref=\"resetPasswordDialog\"\r\n                           :showResetPasswordDialog=\"showResetPasswordDialog\"\r\n                           :has-email=\"hasEmail\"\r\n                           :has-phone=\"hasPhone\"\r\n                           :account-id=\"accountId\"\r\n                           @close=\"closeResetPasswordDialog\"/>\r\n    <account-export-dialog ref=\"resetPasswordDialog\"\r\n                           type=\"personal\"\r\n                           :exportDialogFlag=\"showExportDialog\"\r\n                           :exportColumns=\"exportColumns\"\r\n                           @close=\"closeExportDialog\"/>\r\n  </basic-container>\r\n</template>\r\n\r\n<script>\r\nimport {getList, getPersonalDetail} from \"@/api/contract/userAccount/personaluser\";\r\nimport {resetLock, update} from \"@/api/contract/userAccount/account\";\r\nimport {mapGetters} from \"vuex\";\r\nimport userDetailDialog from \"./userDetailDialog\";\r\nimport resetPasswordDialog from './resetPasswordDialog';\r\nimport accountExportDialog from './accountExportDialog';\r\n\r\nexport default {\r\n  components: {\r\n    userDetailDialog,\r\n    resetPasswordDialog,\r\n    accountExportDialog\r\n  },\r\n  data() {\r\n    return {\r\n      showExportDialog: false,\r\n      exportColumns: [],\r\n      showDetail: false,\r\n      accPersonalDetail: {},\r\n      showResetPasswordDialog: false,\r\n      accountId: \"\",\r\n      hasPhone: false,\r\n      hasEmail: false,\r\n      form: {},\r\n      query: {},\r\n      loading: true,\r\n      page: {\r\n        pageSize: 10,\r\n        currentPage: 1,\r\n        total: 0\r\n      },\r\n      selectionList: [],\r\n      createTimeArr: [],\r\n      updateTimeArr: [],\r\n      option: {\r\n        height: 'auto',\r\n        calcHeight: 210,\r\n        searchShow: true,\r\n        searchMenuSpan: 6,\r\n        tip: false,\r\n        border: true,\r\n        index: false,\r\n        viewBtn: false,\r\n        selection: true,\r\n        addBtn: false,\r\n        editBtn: true,\r\n        delBtn: false,\r\n        column: [\r\n          {\r\n            label: \"账号ID\",\r\n            prop: \"accId\",\r\n            hide: true,\r\n            addDisplay: false,\r\n            editDisplay: false,\r\n          },\r\n          {\r\n            label: \"手机号码\",\r\n            prop: \"userPhone\",\r\n            search: true,\r\n            rules: [{\r\n              required: true,\r\n              message: \"请输入手机号\",\r\n              trigger: \"blur\"\r\n            }]\r\n          },\r\n          {\r\n            label: \"邮箱\",\r\n            prop: \"userEmail\",\r\n            search: true,\r\n            rules: [{\r\n              required: true,\r\n              message: \"请输入邮箱\",\r\n              trigger: \"blur\"\r\n            }]\r\n          },\r\n          {\r\n            label: \"姓名\",\r\n            prop: \"userName\",\r\n            editDisabled: true,\r\n          },\r\n          {\r\n            label: \"注册渠道\",\r\n            prop: \"regAppChannelType\",\r\n            search: true,\r\n            type: \"select\",\r\n            dicUrl: this.getDicValue(this.CONSTANT.REGAPP_CHANNEL_TYPE),\r\n            props: {\r\n              label: \"dictValue\",\r\n              value: \"dictKey\"\r\n            },\r\n            order: 6,\r\n            editDisabled: true,\r\n          },\r\n          {\r\n            label: \"注册时间\",\r\n            prop: \"createTime\",\r\n            searchslot: true,\r\n            search: true,\r\n            editDisabled: true,\r\n          },\r\n          {\r\n            label: \"账号状态\",\r\n            prop: \"accStatus\",\r\n            search: true,\r\n            type: \"select\",\r\n            dicUrl: this.getDicValue(this.CONSTANT.ACC_STATUS),\r\n            props: {\r\n              label: \"dictValue\",\r\n              value: \"dictKey\"\r\n            },\r\n            order: 6,\r\n            editDisabled: true,\r\n            dataType: 'number'\r\n          },\r\n          {\r\n            label: \"修改时间\",\r\n            prop: \"updateTime\",\r\n            searchslot: true,\r\n            search: true,\r\n            display: false,\r\n            hide: true\r\n          },\r\n        ]\r\n      },\r\n      data: [{\r\n        \"userNickname\": \"XHCJ0001\",\r\n        \"email\": \"18410379896\",\r\n        \"phone\": \"18410379896\",\r\n        nickName: \"\",\r\n        userName: \"\",\r\n        customerName: \"\",\r\n        userState: \"\",\r\n        accountState: \"\",\r\n        createTime: \"\",\r\n        updateTime: \"\"\r\n      }]\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"permission\"]),\r\n    permissionList() {\r\n      return {\r\n        addBtn: this.vaildData(this.permission.personaluser_add, false),\r\n        viewBtn: this.vaildData(this.permission.personaluser_view, false),\r\n        delBtn: this.vaildData(this.permission.personaluser_delete, false),\r\n        editBtn: this.vaildData(this.permission.personaluser_edit, false)\r\n      };\r\n    },\r\n    ids() {\r\n      let ids = [];\r\n      this.selectionList.forEach(ele => {\r\n        ids.push(ele.id);\r\n      });\r\n      return ids.join(\",\");\r\n    }\r\n  },\r\n  created() {\r\n    this.option.column.forEach(item => {\r\n      if (!item.hide) {\r\n        this.exportColumns.push({\r\n          label: item.label,\r\n          prop: item.prop,\r\n        })\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    queryPersonalDetail(accId) {\r\n      if (accId && accId.length > 0) {\r\n        getPersonalDetail(accId).then(res => {\r\n          this.accPersonalDetail = res.data.data;\r\n          this.showDetail = true;\r\n        }, error => {\r\n          this.showDetail = false;\r\n          window.console.log(error);\r\n        });\r\n      }\r\n    },\r\n    showAccountDetail(row) {\r\n      this.queryPersonalDetail(row.accId)\r\n    },\r\n    closeDetailDialog() {\r\n      this.showDetail = false;\r\n    },\r\n    closeExportDialog() {\r\n      this.showExportDialog = false;\r\n      this.exportColumns = [];\r\n    },\r\n    handleLockOrUnlock(row) {\r\n      let message = \"\", flag = false;\r\n      if (row.accStatus == 1) {\r\n        message = \"确认锁定该账号吗？\";\r\n        flag = true;\r\n      } else if (row.accStatus == 2) {\r\n        message = \"确认解锁该账号吗\";\r\n        flag = false;\r\n      } else {\r\n        return\r\n      }\r\n      this.$confirm(message, {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          return resetLock({\r\n            flag: flag,\r\n            accId: row.accId,\r\n          });\r\n        })\r\n        .then(() => {\r\n          this.onLoad(this.page);\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"操作成功!\"\r\n          });\r\n        });\r\n    },\r\n    resetPassword(row) {\r\n      this.showResetPasswordDialog = true;\r\n      if (typeof row.userPhone == 'string' && row.userPhone.length > 0) {\r\n        this.hasPhone = true;\r\n      }\r\n      if (typeof row.userEmail == 'string' && row.userEmail.length > 0) {\r\n        this.hasEmail = true;\r\n      }\r\n      this.accountId = row.accId;\r\n    },\r\n    closeResetPasswordDialog() {\r\n      this.showResetPasswordDialog = false;\r\n      this.accountId = null;\r\n      this.hasPhone = false;\r\n      this.hasEmail = false;\r\n    },\r\n    rowUpdate(row, index, done, loading) {\r\n      update(row).then(() => {\r\n        done();\r\n        this.onLoad(this.page);\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"操作成功!\"\r\n        });\r\n      }, error => {\r\n        window.console.log(error);\r\n        loading();\r\n      });\r\n    },\r\n    handleExport() {\r\n      this.showExportDialog = true;\r\n    },\r\n    beforeOpen(done, type) {\r\n      if ([\"edit\", \"view\"].includes(type)) {\r\n        console.log(\"detailForm\", this.form)\r\n        getPersonalDetail(this.form.accId).then(res => {\r\n          done();\r\n          this.form = res.data.data;\r\n        }, error => {\r\n          window.console.log(error);\r\n          this.onLoad(this.page);\r\n        });\r\n      } else {\r\n        done();\r\n      }\r\n    },\r\n    searchReset() {\r\n      this.query = {};\r\n      this.createTimeArr = [];\r\n      this.updateTimeArr = [];\r\n      this.onLoad(this.page);\r\n    },\r\n    searchChange(params, done) {\r\n      this.query = params;\r\n      if (this.createTimeArr) {\r\n        this.query.startRegistTime = this.createTimeArr[0];\r\n        this.query.endRegistTime = this.createTimeArr[1];\r\n      }\r\n      if (this.updateTimeArr) {\r\n        this.query.startUpdateTime = this.updateTimeArr[0];\r\n        this.query.endUpdateTime = this.updateTimeArr[1];\r\n      }\r\n      this.page.currentPage = 1;\r\n      this.onLoad(this.page, params);\r\n      done();\r\n    },\r\n    selectionChange(list) {\r\n      this.selectionList = list;\r\n    },\r\n    selectionClear() {\r\n      this.selectionList = [];\r\n      this.$refs.crud.toggleSelection();\r\n    },\r\n    currentChange(currentPage) {\r\n      this.page.currentPage = currentPage;\r\n    },\r\n    sizeChange(pageSize) {\r\n      this.page.pageSize = pageSize;\r\n    },\r\n    onLoad(page, params = {}) {\r\n      this.loading = true;\r\n      getList(page.currentPage, page.pageSize, Object.assign(params, this.query)).then(res => {\r\n        const data = res.data.data;\r\n        this.page.total = data.total;\r\n        this.data = data.records;\r\n        this.loading = false;\r\n        this.selectionClear();\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"],"sourceRoot":"src/views/contract/userAccount"}]}