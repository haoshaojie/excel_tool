{"remainingRequest":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\partner\\orderprofit.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\partner\\orderprofit.vue","mtime":1618367977459},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getList } from \"@/api/partner/orderprofit\";\nexport default {\n  data: function data() {\n    return {\n      tableData: [],\n      dialogVisible: false,\n      searchParam: {\n        queryProfitTime: [this.$route.query.startProfitTime, this.$route.query.endProfitTime]\n      },\n      form: {},\n      query: {},\n      loading: true,\n      pageTab1: {\n        pageSize: 10,\n        currentPage: 1,\n        total: 0\n      },\n      pageTab2: {\n        pageSize: 10,\n        currentPage: 1,\n        total: 0\n      },\n      partnerId: 0,\n      selectionList: [],\n      searchOption: {\n        menuSpan: 6,\n        submitBtn: false,\n        column: [{\n          label: '分润时间',\n          prop: 'queryProfitTime',\n          type: 'datetimerange',\n          format: \"yyyy-MM-dd HH:mm:ss\",\n          valueFormat: \"yyyy-MM-dd HH:mm:ss\",\n          span: 8\n        }, {\n          label: '产品名称',\n          prop: 'prodName',\n          span: 5,\n          showWordLimit: true,\n          maxlength: 30\n        }, {\n          label: '产品编码',\n          prop: 'prodCode',\n          span: 5,\n          showWordLimit: true,\n          maxlength: 30\n        }]\n      },\n      tabType: {},\n      tabOption: {\n        column: [{\n          icon: 'el-icon-tickets',\n          label: '企业客户',\n          prop: 'tab1'\n        }, {\n          icon: 'el-icon-tickets',\n          label: '个人用户',\n          prop: 'tab2'\n        }]\n      },\n      optionTab1: {\n        height: 'auto',\n        calcHeight: 210,\n        addBtn: false,\n        addRowBtn: false,\n        editBtn: false,\n        viewBtn: false,\n        delBtn: false,\n        refreshBtn: false,\n        searchBtn: false,\n        searchShowBtn: false,\n        filterBtn: false,\n        searchShow: false,\n        menu: false,\n        searchMenuSpan: 6,\n        tip: false,\n        border: true,\n        index: true,\n        selection: false,\n        column: [{\n          label: \"主键id 雪花算法产生\",\n          prop: \"id\",\n          hide: true\n        }, {\n          label: \"合约编码\",\n          prop: \"conCode\"\n        }, {\n          label: \"合约名称\",\n          prop: \"conName\"\n        }, {\n          label: \"合约表id\",\n          prop: \"conId\",\n          hide: true\n        }, {\n          label: \"客户名称\",\n          prop: \"customerName\"\n        }, {\n          label: \"产品名称\",\n          prop: \"prodName\"\n        }, {\n          label: \"产品编码\",\n          prop: \"prodCode\"\n        }, {\n          label: \"合约金额(元)\",\n          prop: \"orderAmount\"\n        }, {\n          label: \"分润金额(元)\",\n          prop: \"profitAmount\"\n        }, {\n          label: \"分润比例\",\n          prop: \"profitRate\",\n          slot: true\n        }, {\n          label: \"分润时间\",\n          prop: \"profitTime\"\n        }]\n      },\n      optionTab2: {\n        height: 'auto',\n        calcHeight: 210,\n        addBtn: false,\n        addRowBtn: false,\n        editBtn: false,\n        viewBtn: false,\n        delBtn: false,\n        refreshBtn: false,\n        searchBtn: false,\n        searchShowBtn: false,\n        filterBtn: false,\n        searchShow: false,\n        menu: false,\n        searchMenuSpan: 6,\n        tip: false,\n        border: true,\n        index: true,\n        selection: false,\n        column: [{\n          label: \"订单编号\",\n          prop: \"orderCode\"\n        }, {\n          label: \"订单来源\",\n          prop: \"prodType\"\n        }, {\n          label: \"产品名称\",\n          prop: \"prodName\"\n        }, {\n          label: \"产品编码\",\n          prop: \"prodCode\"\n        }, {\n          label: \"订单金额(元)\",\n          prop: \"profitAmount\"\n        }, {\n          label: \"分润比例\",\n          prop: \"profitRate\"\n        }, {\n          label: \"分润金额(元)\",\n          prop: \"profitAmount\"\n        }, {\n          label: \"分润时间\",\n          prop: \"profitTime\"\n        }]\n      },\n      dataTab1: [],\n      // 客户分润明细\n      dataTab2: [] // 个人分润明细\n\n    };\n  },\n  created: function created() {\n    this.tabType = this.tabOption.column[0];\n  },\n  computed: {\n    ids: function ids() {\n      var ids = [];\n      this.selectionList.forEach(function (ele) {\n        ids.push(ele.id);\n      });\n      return ids.join(\",\");\n    }\n  },\n  methods: {\n    // tabs切换\n    handleChange: function handleChange(column) {\n      this.tabType = column; // this.$message.success(JSON.stringify(column));\n    },\n    currentChange1: function currentChange1(currentPage) {\n      this.pageTab1.currentPage = currentPage;\n    },\n    currentChange2: function currentChange2(currentPage) {\n      this.pageTab2.currentPage = currentPage;\n    },\n    sizeChange1: function sizeChange1(pageSize) {\n      this.pageTab1.pageSize = pageSize;\n    },\n    sizeChange2: function sizeChange2(pageSize) {\n      this.pageTab2.pageSize = pageSize;\n    },\n    onLoad: function onLoad() {\n      var _this = this;\n\n      this.loading = true;\n      this.partnerId = this.$route.query.id;\n      var startProfitTime = this.$route.query.startProfitTime;\n      var endProfitTime = this.$route.query.endProfitTime;\n      this.searchParam.queryPprofitTime = [startProfitTime, endProfitTime];\n      this.query.parId = this.partnerId; //加载客户分润明细\n\n      getList(this.pageTab1.currentPage, this.pageTab1.pageSize, Object.assign({\n        profitType: 1\n      }, this.query)).then(function (res) {\n        var data = res.data.data;\n        _this.pageTab1.total = data.total;\n        _this.dataTab1 = data.records;\n        _this.loading = false;\n      }); // 加载个人分润明细\n\n      this.pageTab1.currentPage = 1;\n      getList(this.pageTab2.currentPage, this.pageTab2.pageSize, Object.assign({\n        profitType: 2\n      }, this.query)).then(function (res) {\n        var data = res.data.data;\n        _this.pageTab2.total = data.total;\n        _this.dataTab2 = data.records;\n        _this.loading = false;\n      });\n    },\n    // 搜索\n    doSearch: function doSearch() {\n      // this.$message.success('当前数据'+JSON.stringify(this.searchParam));\n      // 查询操作\n      this.query = this.searchParam;\n\n      if (this.searchParam.queryProfitTime) {\n        this.query.startProfitTime = this.searchParam.queryProfitTime[0];\n        this.query.endProfitTime = this.searchParam.queryProfitTime[1];\n      }\n\n      this.pageTab1.currentPage = 1;\n      this.pageTab2.currentPage = 1;\n      this.onLoad();\n    },\n    emptytChange: function emptytChange() {// this.$message.success('清空方法回调');\n    },\n    viewProfitRate: function viewProfitRate(row) {\n      //查看合约分润明细\n      if (row.profitRate) {\n        var rateData = JSON.parse(row.profitRate);\n        this.tableData = rateData;\n      } else {\n        this.tableData = [];\n      }\n\n      this.dialogVisible = true;\n    }\n  }\n};",{"version":3,"sources":["orderprofit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n <basic-container>\r\n  <avue-form ref=\"form\" v-model=\"searchParam\" :option=\"searchOption\" @reset-change=\"emptytChange\" @submit=\"doSearch\">\r\n    <template slot-scope=\"scope\" slot=\"menuForm\">\r\n        <el-button @click=\"doSearch\" icon=\"el-icon-search\">搜索</el-button>\r\n    </template>\r\n  </avue-form>\r\n\r\n\r\n   <avue-tabs :option=\"tabOption\" @change=\"handleChange\"></avue-tabs>\r\n   <span v-if=\"tabType.prop==='tab1'\">\r\n        <avue-crud :option=\"optionTab1\"\r\n                   :table-loading=\"loading\"\r\n                   :data=\"dataTab1\"\r\n                   :page=\"pageTab1\"\r\n                   v-model=\"form\"\r\n                   ref=\"crud\"\r\n                   @search-change=\"searchChange1\"\r\n                   @search-reset=\"searchReset1\"\r\n                   @selection-change=\"selectionChange1\"\r\n                   @current-change=\"currentChange1\"\r\n                   @size-change=\"sizeChange1\"\r\n                   @on-load=\"onLoad\">\r\n         <template slot=\"profitRate\" slot-scope=\"scope\">\r\n           <a @click=\"viewProfitRate(scope.row)\" style=\"color:#078ecf;\">查看</a>\r\n         </template>\r\n\r\n        </avue-crud>\r\n   </span>\r\n   <span v-else-if=\"tabType.prop==='tab2'\">\r\n     <avue-crud :option=\"optionTab2\"\r\n                :table-loading=\"loading\"\r\n                :data=\"dataTab2\"\r\n                :page=\"pageTab2\"\r\n                v-model=\"form\"\r\n                ref=\"crud\"\r\n                @search-change=\"searchChange2\"\r\n                @search-reset=\"searchReset2\"\r\n                @selection-change=\"selectionChange2\"\r\n                @current-change=\"currentChange2\"\r\n                @size-change=\"sizeChange2\"\r\n                @on-load=\"onLoad\">\r\n     </avue-crud>\r\n   </span>\r\n   <el-dialog\r\n     title=\"分润信息\"\r\n     :visible.sync=\"dialogVisible\"\r\n     width=\"30%\"\r\n     :before-close=\"handleClose\">\r\n\r\n     <el-table\r\n       :data=\"tableData\"\r\n\r\n       style=\"width: 100%\">\r\n       <el-table-column\r\n         prop=\"userRcnt\"\r\n         align=\"center\"\r\n         label=\"用户人数\"\r\n         width=\"180\">\r\n       </el-table-column>\r\n       <el-table-column\r\n         prop=\"profitRate\"\r\n         align=\"center\"\r\n         label=\"分润比例\"\r\n         width=\"180\">\r\n       </el-table-column>\r\n       <el-table-column\r\n         prop=\"profitAmount\"\r\n         align=\"center\"\r\n         label=\"分润金额(元)\">\r\n       </el-table-column>\r\n     </el-table>\r\n\r\n   </el-dialog>\r\n </basic-container>\r\n\r\n</template>\r\n\r\n<script>\r\n  import {getList} from \"@/api/partner/orderprofit\";\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        tableData: [],\r\n        dialogVisible: false,\r\n        searchParam:{\r\n          queryProfitTime:[ this.$route.query.startProfitTime,this.$route.query.endProfitTime]\r\n        },\r\n        form: {},\r\n        query: {},\r\n        loading: true,\r\n        pageTab1: {\r\n          pageSize: 10,\r\n          currentPage: 1,\r\n          total: 0\r\n        },\r\n        pageTab2: {\r\n          pageSize: 10,\r\n          currentPage: 1,\r\n          total: 0\r\n        },\r\n        partnerId:0,\r\n        selectionList: [],\r\n        searchOption:{\r\n          menuSpan:6,\r\n          submitBtn:false,\r\n          column:[\r\n             {\r\n              label:'分润时间',\r\n              prop:'queryProfitTime',\r\n              type: 'datetimerange',\r\n              format: \"yyyy-MM-dd HH:mm:ss\",\r\n              valueFormat: \"yyyy-MM-dd HH:mm:ss\",\r\n              span: 8\r\n            }, {\r\n              label:'产品名称',\r\n              prop:'prodName',\r\n              span: 5,\r\n              showWordLimit:true,\r\n              maxlength:30\r\n            }, {\r\n              label:'产品编码',\r\n              prop:'prodCode',\r\n              span: 5,\r\n              showWordLimit:true,\r\n              maxlength:30\r\n            }\r\n          ]\r\n        },\r\n        tabType:{},\r\n        tabOption:{\r\n          column: [{\r\n            icon:'el-icon-tickets',\r\n            label: '企业客户',\r\n            prop: 'tab1',\r\n          }, {\r\n            icon:'el-icon-tickets',\r\n            label: '个人用户',\r\n            prop: 'tab2',\r\n          }]\r\n        },\r\n        optionTab1: {\r\n          height: 'auto',\r\n          calcHeight: 210,\r\n          addBtn:false,\r\n          addRowBtn:false,\r\n          editBtn:false,\r\n          viewBtn:false,\r\n          delBtn:false,\r\n          refreshBtn:false,\r\n          searchBtn:false,\r\n          searchShowBtn:false,\r\n          filterBtn:false,\r\n          searchShow: false,\r\n          menu:false,\r\n          searchMenuSpan: 6,\r\n          tip: false,\r\n          border: true,\r\n          index: true,\r\n          selection: false,\r\n          column: [\r\n            {\r\n              label: \"主键id 雪花算法产生\",\r\n              prop: \"id\",\r\n              hide:true\r\n            },\r\n            {\r\n              label: \"合约编码\",\r\n              prop: \"conCode\"\r\n            },\r\n            {\r\n              label: \"合约名称\",\r\n              prop: \"conName\"\r\n            },\r\n            {\r\n              label: \"合约表id\",\r\n              prop: \"conId\",\r\n              hide:true\r\n            },\r\n            {\r\n              label: \"客户名称\",\r\n              prop: \"customerName\"\r\n            },\r\n            {\r\n              label: \"产品名称\",\r\n              prop: \"prodName\",\r\n            },\r\n            {\r\n              label: \"产品编码\",\r\n              prop: \"prodCode\",\r\n            },\r\n            {\r\n              label: \"合约金额(元)\",\r\n              prop: \"orderAmount\"\r\n            },\r\n            {\r\n              label: \"分润金额(元)\",\r\n              prop: \"profitAmount\"\r\n            },\r\n            {\r\n              label: \"分润比例\",\r\n              prop: \"profitRate\",\r\n              slot:true\r\n            },\r\n            {\r\n              label: \"分润时间\",\r\n              prop: \"profitTime\"\r\n            },\r\n          ]\r\n        },\r\n        optionTab2: {\r\n          height: 'auto',\r\n          calcHeight: 210,\r\n          addBtn:false,\r\n          addRowBtn:false,\r\n          editBtn:false,\r\n          viewBtn:false,\r\n          delBtn:false,\r\n          refreshBtn:false,\r\n          searchBtn:false,\r\n          searchShowBtn:false,\r\n          filterBtn:false,\r\n          searchShow: false,\r\n          menu:false,\r\n          searchMenuSpan: 6,\r\n          tip: false,\r\n          border: true,\r\n          index: true,\r\n          selection: false,\r\n          column: [\r\n            {\r\n              label: \"订单编号\",\r\n              prop: \"orderCode\"\r\n            },\r\n            {\r\n              label: \"订单来源\",\r\n              prop: \"prodType\"\r\n            },\r\n            {\r\n              label: \"产品名称\",\r\n              prop: \"prodName\",\r\n            },\r\n            {\r\n              label: \"产品编码\",\r\n              prop: \"prodCode\",\r\n            },\r\n            {\r\n              label: \"订单金额(元)\",\r\n              prop: \"profitAmount\"\r\n            },\r\n            {\r\n              label: \"分润比例\",\r\n              prop: \"profitRate\"\r\n            },\r\n           {\r\n             label: \"分润金额(元)\",\r\n             prop: \"profitAmount\"\r\n           },\r\n            {\r\n              label: \"分润时间\",\r\n              prop: \"profitTime\",\r\n            }\r\n          ]\r\n        },\r\n        dataTab1: [],  // 客户分润明细\r\n        dataTab2:[]   // 个人分润明细\r\n      };\r\n    },\r\n    created() {\r\n       this.tabType = this.tabOption.column[0];\r\n    },\r\n    computed: {\r\n      ids() {\r\n        let ids = [];\r\n        this.selectionList.forEach(ele => {\r\n          ids.push(ele.id);\r\n        });\r\n        return ids.join(\",\");\r\n      }\r\n    },\r\n    methods: {\r\n      // tabs切换\r\n       handleChange(column) {\r\n         this.tabType = column;\r\n         // this.$message.success(JSON.stringify(column));\r\n       },\r\n      currentChange1(currentPage){\r\n        this.pageTab1.currentPage = currentPage;\r\n      },\r\n      currentChange2(currentPage){\r\n        this.pageTab2.currentPage = currentPage;\r\n      },\r\n      sizeChange1(pageSize){\r\n        this.pageTab1.pageSize = pageSize;\r\n      },\r\n      sizeChange2(pageSize){\r\n        this.pageTab2.pageSize = pageSize;\r\n      },\r\n      onLoad() {\r\n        this.loading = true;\r\n        this.partnerId =  this.$route.query.id;\r\n        let startProfitTime = this.$route.query.startProfitTime;\r\n        let endProfitTime = this.$route.query.endProfitTime;\r\n        this.searchParam.queryPprofitTime=[startProfitTime,endProfitTime];\r\n\r\n        this.query.parId = this.partnerId;\r\n         //加载客户分润明细\r\n         getList(this.pageTab1.currentPage, this.pageTab1.pageSize, Object.assign({profitType:1}, this.query)).then(res => {\r\n           const data = res.data.data;\r\n           this.pageTab1.total = data.total;\r\n           this.dataTab1 = data.records;\r\n           this.loading = false;\r\n         });\r\n\r\n         // 加载个人分润明细\r\n         this.pageTab1.currentPage = 1;\r\n         getList(this.pageTab2.currentPage, this.pageTab2.pageSize, Object.assign({profitType:2}, this.query)).then(res => {\r\n           const data = res.data.data;\r\n           this.pageTab2.total = data.total;\r\n           this.dataTab2 = data.records;\r\n           this.loading = false;\r\n         });\r\n      },\r\n      // 搜索\r\n      doSearch() {\r\n       // this.$message.success('当前数据'+JSON.stringify(this.searchParam));\r\n\r\n        // 查询操作\r\n        this.query = this.searchParam;\r\n        if(this.searchParam.queryProfitTime) {\r\n          this.query.startProfitTime = this.searchParam.queryProfitTime[0];\r\n          this.query.endProfitTime = this.searchParam.queryProfitTime[1];\r\n        }\r\n        this.pageTab1.currentPage = 1;\r\n        this.pageTab2.currentPage = 1;\r\n        this.onLoad();\r\n\r\n      },\r\n      emptytChange(){\r\n        // this.$message.success('清空方法回调');\r\n      },\r\n      viewProfitRate(row){ //查看合约分润明细\r\n        if(row.profitRate) {\r\n          let rateData = JSON.parse(row.profitRate);\r\n          this.tableData = rateData;\r\n        } else{\r\n          this.tableData = [];\r\n        }\r\n        this.dialogVisible = true;\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"],"sourceRoot":"src/views/partner"}]}