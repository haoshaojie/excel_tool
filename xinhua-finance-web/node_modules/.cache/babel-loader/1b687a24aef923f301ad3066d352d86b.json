{"remainingRequest":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\product\\productItem\\extendInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\product\\productItem\\extendInfo.vue","mtime":1618541026429},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _toConsumableArray from \"F:/\\u4E1C\\u65B9\\u901A/source/b_zwj/xinhua-finance-web/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport extendProDialog from \"./extendProDialog\";\nimport { itemValueByProdId } from \"@/api/contract/product/productitem\";\nimport { getListByCate } from \"@/api/contract/product/property\";\nimport bus from '@/assets/js/event-bus';\nexport default {\n  components: {\n    extendProDialog: extendProDialog\n  },\n  name: \"extendInfo\",\n  props: {\n    isView: false,\n    extendInfo: {}\n  },\n  data: function data() {\n    return {\n      dialogForm: {\n        propType: 2,\n        exclude: ''\n      },\n      cateId: '',\n      excludeIds: [],\n      openProDialog: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    bus.$on('cateIdBus', function (data) {\n      _this.cateId = data;\n\n      _this.initExtendInfo();\n    });\n  },\n  methods: {\n    showData: function showData(data) {\n      var _this2 = this;\n\n      this.cateId = data.cateId ? data.cateId : '';\n      itemValueByProdId(data.id).then(function (res) {\n        var _this2$extendInfo$ite;\n\n        var data = res.data.data;\n        console.log(\"extend\", data);\n\n        (_this2$extendInfo$ite = _this2.extendInfo.itemValues).push.apply(_this2$extendInfo$ite, _toConsumableArray(data));\n\n        data.forEach(function (item) {\n          _this2.excludeIds.push(item.propId);\n        });\n        _this2.dialogForm.exclude = _this2.excludeIds.join(',');\n      });\n    },\n    initExtendInfo: function initExtendInfo() {\n      var _this3 = this;\n\n      this.extendInfo.itemValues = []; // 查询 当前类型先的属性已经属性待选值\n\n      getListByCate({\n        propType: this.dialogForm.propType,\n        cateId: this.cateId\n      }).then(function (res) {\n        var data = res.data.data;\n\n        _this3.extendInfoAdd(data);\n      });\n    },\n    cancelDialog: function cancelDialog() {\n      this.openProDialog = false;\n    },\n    openDialog: function openDialog() {\n      if (this.cateId == '') {\n        this.$message.warning('请先选择产品类型');\n      } else {\n        this.openProDialog = true;\n      }\n    },\n    extendInfoAdd: function extendInfoAdd(data) {\n      var _this4 = this;\n\n      if (data) {\n        var _this$extendInfo$item;\n\n        data.forEach(function (item) {\n          _this4.excludeIds.push(item.id);\n\n          item.propId = item.id;\n        });\n\n        (_this$extendInfo$item = this.extendInfo.itemValues).push.apply(_this$extendInfo$item, _toConsumableArray(data));\n\n        console.log(123, this.extendInfo.itemValues);\n        this.dialogForm.exclude = this.excludeIds.join(',');\n      }\n\n      this.openProDialog = false;\n    },\n    extendInfoRm: function extendInfoRm(index) {\n      this.extendInfo.itemValues.splice(index, 1);\n      this.excludeIds.splice(index, 1);\n      this.dialogForm.exclude = this.excludeIds.join(',');\n    }\n  }\n};",{"version":3,"sources":["extendInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <el-row>\r\n    <el-col span=\"12\">\r\n      <el-form ref=\"extendForm\" :model=\"extendInfo\" label-width=\"100px\" class=\"demo-form-inline\"  size=\"small\">\r\n        <el-button type=\"primary\" size=\"small\" v-if=\"!isView\" @click=\"openDialog\" class=\"add-btn\">添加扩展属性</el-button>\r\n        <el-form-item v-for=\"(item, i) in extendInfo.itemValues\" :key='i' :label=\"item.propName\" :prop=\"'itemValues.'+i+'.propValue'\"\r\n          :rules=\"item.isRequired==1?[{ required: true, message:`请输入${item.propName}`, trigger: 'blur' }]:''\">\r\n          <el-row v-if=\"item.showType == 1\" style=\"display: flex;\">\r\n            <el-input v-model=\"item.propValue\" :disabled=\"isView\" placeholder=\"请输入\" size=\"small\"></el-input>\r\n            <el-button icon=\"el-icon-remove-outline\" type=\"text\" v-if=\"!isView\" @click=\"extendInfoRm(i)\" style=\"margin-left: 10px; color: #E02020;\">删除</el-button>\r\n          </el-row>\r\n          <el-row v-if=\"item.showType == 2\" style=\"display: flex;\">\r\n            <el-select style=\"width:100%\" :disabled=\"isView\" v-model=\"item.propValue\" placeholder=\"请选择\" size=\"small\">\r\n              <el-option v-for=\"(im,t) in item.options\" :key=\"t\" :label=\"im.propValue\" :value=\"im.propValue\"></el-option>\r\n            </el-select>\r\n            <el-button icon=\"el-icon-remove-outline\" type=\"text\" v-if=\"!isView\" @click=\"extendInfoRm(i)\" style=\"margin-left: 10px; color: #E02020;\">删除</el-button>\r\n          </el-row>\r\n        </el-form-item>\r\n        <extend-pro-dialog \r\n              dialogTitle=\"添加扩展属性\" \r\n              :dialogForm=\"dialogForm\" \r\n              :proDialog=\"openProDialog\" \r\n              @result=\"extendInfoAdd\" \r\n              @cancel=\"cancelDialog\">\r\n        </extend-pro-dialog>\r\n      </el-form>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n<script>\r\nimport extendProDialog from \"./extendProDialog\";\r\nimport {itemValueByProdId} from \"@/api/contract/product/productitem\";\r\nimport {getListByCate} from \"@/api/contract/product/property\";\r\nimport bus from '@/assets/js/event-bus';\r\nexport default {\r\n  components:{extendProDialog},\r\n  name:\"extendInfo\",\r\n  props:{\r\n    isView:false,\r\n    extendInfo:{\r\n    }\r\n  },\r\n  data(){\r\n      return {\r\n        dialogForm:{\r\n          propType:2,\r\n          exclude:'',\r\n        },\r\n        cateId:'',\r\n        excludeIds:[],\r\n        openProDialog:false,\r\n      }\r\n  },\r\n  mounted(){\r\n    bus.$on('cateIdBus',data =>{\r\n      this.cateId = data;\r\n      this.initExtendInfo();\r\n    })\r\n  },\r\n  methods:{\r\n    showData(data){\r\n      this.cateId = data.cateId?data.cateId:'';\r\n      itemValueByProdId(data.id).then(res =>{\r\n        let data = res.data.data;\r\n        console.log(\"extend\",data)\r\n        this.extendInfo.itemValues.push(...data);\r\n        data.forEach(item => {\r\n          this.excludeIds.push(item.propId);\r\n        });\r\n        this.dialogForm.exclude = this.excludeIds.join(',');\r\n        })\r\n    },\r\n    initExtendInfo(){\r\n      this.extendInfo.itemValues=[];\r\n      // 查询 当前类型先的属性已经属性待选值\r\n      getListByCate({propType:this.dialogForm.propType,cateId:this.cateId}).then(res => {\r\n        const data = res.data.data;\r\n        this.extendInfoAdd(data)\r\n      });\r\n    },\r\n    cancelDialog(){\r\n      this.openProDialog = false\r\n    },\r\n    openDialog(){\r\n      if(this.cateId ==''){\r\n        this.$message.warning('请先选择产品类型');\r\n      }else{\r\n        this.openProDialog = true\r\n      }\r\n    },\r\n    extendInfoAdd(data) {\r\n      if(data){\r\n        data.forEach(item => {\r\n          this.excludeIds.push(item.id);\r\n          item.propId = item.id;\r\n        });\r\n        this.extendInfo.itemValues.push(...data);\r\n        console.log(123,this.extendInfo.itemValues)\r\n        this.dialogForm.exclude = this.excludeIds.join(',');\r\n      }\r\n      this.openProDialog = false;\r\n    },\r\n    extendInfoRm(index){\r\n      this.extendInfo.itemValues.splice(index, 1);\r\n      this.excludeIds.splice(index, 1);\r\n      this.dialogForm.exclude = this.excludeIds.join(',');\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.add-btn{\r\n  margin-bottom: 1rem;\r\n}\r\n</style>"],"sourceRoot":"src/views/contract/product/productItem"}]}