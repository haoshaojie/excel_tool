{"remainingRequest":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\order\\userOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\order\\userOrder.vue","mtime":1618794737781},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.parse-int\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"F:/\\u4E1C\\u65B9\\u901A/source/b_zwj/xinhua-finance-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { exportData, getDetail, getList } from \"@/api/contract/order/userOrder\";\nimport { mapGetters } from \"vuex\";\nimport userOrderView from \"./userOrderView\";\nimport { getDictByCode } from \"@/api/system/dict\";\nexport default {\n  components: {\n    userOrderView: userOrderView\n  },\n  data: function data() {\n    return {\n      form: {},\n      query: {},\n      loading: true,\n      viewBox: false,\n      page: {\n        pageSize: 10,\n        currentPage: 1,\n        total: 0\n      },\n      selectionList: [],\n      appCodeDic: null,\n      group: [],\n      option: {\n        height: 'auto',\n        calcHeight: 210,\n        searchShow: true,\n        searchMenuSpan: 6,\n        tip: false,\n        border: true,\n        index: false,\n        viewBtn: true,\n        selection: true,\n        addBtn: false,\n        editBtn: false,\n        delBtn: false,\n        excelBtn: false,\n        labelWidth: \"30%\",\n        refreshBtn: false,\n        columnBtn: false,\n        searchShowBtn: false,\n        label: '基础信息',\n        // icon: 'el-icon-edit-outline',\n        column: [// {\n        //   label: \"基础信息\",\n        //   prop: \"isDeleted\",\n        //   span: 24,\n        //   hide: true,\n        //   formslot: true,\n        //   labelslot: true,\n        //   order: 100,\n        //   labelWidth: \"100px\"\n        // },\n        {\n          label: \"手机号码\",\n          prop: \"phoneNumber\",\n          search: true,\n          display: true\n        }, {\n          label: \"邮箱\",\n          prop: \"mailbox\",\n          search: true,\n          display: true\n        }, {\n          label: \"订单编码\",\n          prop: \"orderNo\",\n          order: 9,\n          searchOrder: 9,\n          search: true,\n          display: true\n        }, {\n          label: \"产品名称\",\n          prop: \"goodsName\",\n          search: true,\n          searchOrder: 8,\n          hide: true,\n          display: false\n        }, {\n          label: \"产品编码\",\n          prop: \"goodsNo\",\n          search: true,\n          searchOrder: 7,\n          hide: true,\n          display: false\n        }, {\n          label: \"订单金额（元）\",\n          prop: \"orderAmount\",\n          order: 8,\n          display: true\n        }, {\n          label: \"订单来源\",\n          prop: \"appCode\",\n          order: 7,\n          search: true,\n          display: true,\n          type: \"select\",\n          dicUrl: this.getDicValue(this.CONSTANT.APP_CODE),\n          props: {\n            label: \"dictValue\",\n            value: \"dictKey\"\n          },\n          rules: [{\n            required: true,\n            message: \"请选择表现方式\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: \"订购时间\",\n          prop: \"orderTime\",\n          order: 6,\n          display: true\n        }, {\n          label: \"同步时间\",\n          prop: \"createTime\",\n          search: true,\n          searchOrder: 10,\n          span: 12,\n          format: 'yyyy-MM-dd HH:mm:ss',\n          // 这是组件展示的日期格式\n          valueFormat: 'yyyy-MM-dd HH:mm:ss',\n          // 这是组件value值的格式\n          type: \"datetime\",\n          searchRange: true,\n          addDisplay: false,\n          //新增时是否显示\n          editDisplay: false,\n          //编辑时是否显示\n          viewDisplay: true //详情时是否显示\n\n        }, {\n          labelWidth: 0,\n          label: '',\n          prop: 'info',\n          span: 24,\n          hide: true,\n          formslot: true\n        }]\n      },\n      infoOption: {\n        menu: false,\n        addBtn: false,\n        refreshBtn: false,\n        columnBtn: false,\n        searchShowBtn: false,\n        searchIcon: false,\n        // label: '客户经理信息',\n        // icon: 'el-icon-edit-outline',\n        column: [{\n          label: '商品编码',\n          prop: 'goodsNo'\n        }, {\n          label: '商品名称',\n          prop: 'goodsName'\n        }, {\n          label: '商品金额',\n          prop: 'goodsPrice'\n        }, {\n          label: '到期时间',\n          prop: 'expiredDate'\n        }]\n      },\n      data: []\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters([\"permission\"])), {}, {\n    permissionList: function permissionList() {\n      return {\n        addBtn: this.vaildData(this.permission.userorder_add, false),\n        viewBtn: this.vaildData(this.permission.userorder_view, false),\n        editBtn: this.vaildData(this.permission.userorder_excel, false)\n      };\n    },\n    ids: function ids() {\n      var ids = [];\n      this.selectionList.forEach(function (ele) {\n        ids.push(ele.id);\n      });\n      return ids.join(\",\");\n    },\n    infoData: function infoData() {\n      return this.form.info || [];\n    }\n  }),\n  methods: {\n    closeDialog: function closeDialog(val) {\n      this.viewBox = val;\n      this.$emit(\"close\", false);\n    },\n    beforeOpen: function beforeOpen(done, type) {\n      var _this = this;\n\n      if ([\"edit\", \"view\"].includes(type)) {\n        getDetail(this.form.id).then(function (res) {\n          _this.form = res.data.data;\n          _this.form.appCode = Number.parseInt(_this.form.appCode);\n          _this.form.info = res.data.data.userOrderGoodsList;\n        });\n      }\n\n      done();\n    },\n    searchReset: function searchReset() {\n      this.query = {};\n      this.onLoad(this.page);\n    },\n    searchChange: function searchChange(params, done) {\n      this.query = params;\n\n      if (params.createTime) {\n        params.createTimeBegin = params.createTime[0]; // + \" 00:00:00\";\n\n        params.createTimeEnd = params.createTime[1]; // + \" 23:59:59\";\n\n        params.createTime = null;\n      }\n\n      this.page.currentPage = 1;\n      this.onLoad(this.page, params);\n      done();\n    },\n    selectionChange: function selectionChange(list) {\n      this.selectionList = list;\n    },\n    selectionClear: function selectionClear() {\n      this.selectionList = [];\n      this.$refs.crud.toggleSelection();\n    },\n    currentChange: function currentChange(currentPage) {\n      this.page.currentPage = currentPage;\n    },\n    sizeChange: function sizeChange(pageSize) {\n      this.page.pageSize = pageSize;\n    },\n    onLoad: function onLoad(page) {\n      var _this2 = this;\n\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.loading = true;\n      this.appCodeDic = new Map();\n      getDictByCode(this.CONSTANT.APP_CODE).then(function (res) {\n        console.log(\"初始化字典\", res.data.data); //组装字典\n\n        for (var i = 0; i < res.data.data.length; i++) {\n          _this2.appCodeDic.set(res.data.data[i].dictKey + \"\", res.data.data[i].dictValue);\n        }\n      });\n      getList(page.currentPage, page.pageSize, Object.assign(params, this.query)).then(function (res) {\n        var data = res.data.data;\n        _this2.page.total = data.total;\n        _this2.data = data.records;\n\n        for (var i = 0; i < _this2.data.length; i++) {\n          if (_this2.data[i].appCode && _this2.data[i].appCode != \"\") {\n            _this2.data[i].appCode = Number.parseInt(_this2.data[i].appCode);\n          } // this.data[i].phoneNumber = this.data[i].phoneNumber.replace(/^(\\d{3})\\d{4}(\\d{4})$/, '$1****$2');\n\n        }\n\n        _this2.loading = false;\n\n        _this2.selectionClear();\n      });\n    },\n    detailView: function detailView(row) {\n      this.viewBox = true;\n    },\n    exportExcel: function exportExcel() {\n      var _this3 = this;\n\n      console.log(\"导出\");\n      exportData(this.query).then(function (res) {\n        var downData = res.data.data;\n\n        for (var i = 0; i < downData.length; i++) {\n          console.log(\"字典map\", _this3.appCodeDic);\n          downData[i].appCodeName = _this3.appCodeDic.get(downData[i].appCode + \"\"); // downData[i].phoneNumber = downData[i].phoneNumber.replace(/^(\\d{3})\\d{4}(\\d{4})$/, '$1****$2');\n        }\n\n        _this3.$export.excel({\n          title: \"用户订单信息\",\n          columns: [{\n            label: \"手机号码\",\n            prop: \"phoneNumber\"\n          }, {\n            label: \"邮箱\",\n            prop: \"mailbox\"\n          }, {\n            label: \"订单编码\",\n            prop: \"orderNo\",\n            order: 9\n          }, {\n            label: \"订单金额（元）\",\n            prop: \"orderAmount\",\n            order: 8,\n            display: true\n          }, {\n            label: \"订单来源\",\n            prop: \"appCodeName\",\n            order: 7\n          }, {\n            label: \"订购时间\",\n            prop: \"orderTime\",\n            order: 6\n          }, {\n            label: \"同步时间\",\n            prop: \"createTime\",\n            searchOrder: 10\n          }, {\n            label: '商品编码',\n            prop: 'goodsNo'\n          }, {\n            label: '商品名称',\n            prop: 'goodsName'\n          }, {\n            label: '商品金额',\n            prop: 'goodsPrice'\n          }, {\n            label: '到期时间',\n            prop: 'expiredDate'\n          }],\n          data: downData\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["userOrder.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <basic-container>\r\n    <avue-crud :option=\"option\"\r\n               :table-loading=\"loading\"\r\n               :data=\"data\"\r\n               :page=\"page\"\r\n               :permission=\"permissionList\"\r\n               :before-open=\"beforeOpen\"\r\n               v-model=\"form\"\r\n               ref=\"crud\"\r\n               @search-change=\"searchChange\"\r\n               @search-reset=\"searchReset\"\r\n               @selection-change=\"selectionChange\"\r\n               @current-change=\"currentChange\"\r\n               @size-change=\"sizeChange\"\r\n               @on-load=\"onLoad\">\r\n      <template slot=\"menuLeft\">\r\n        <el-button type=\"primary\" name=\"excelBtn\"\r\n                   size=\"small\"\r\n                   icon=\"el-icon-download\"\r\n                   plain\r\n                   v-if=\"permission.userorder_excel\"\r\n                   @click=\"exportExcel\">导出\r\n        </el-button>\r\n        <!--        <template slot-scope=\"scope\" slot=\"isDeletedForm\">-->\r\n        <!--          <el-tag>12121231</el-tag>-->\r\n        <!--        </template>-->\r\n        <template slot-scope=\"{disabled}\" slot=\"isDeletedLabel\">\r\n          <span>姓名&nbsp;&nbsp;</span>\r\n          <el-input :disabled=\"disabled\" v-model=\"form.isDeleted\"></el-input>\r\n        </template>\r\n      </template>\r\n      <!--      <template slot-scope=\"scope\" slot=\"menu\">-->\r\n      <!--        <el-button type=\"text\" size=\"small\" icon=\"el-icon-view\"-->\r\n      <!--                   v-if=\"permission.userorder_view\"-->\r\n      <!--                   @click.native=\"detailView(scope.row)\">查看2-->\r\n      <!--        </el-button>-->\r\n      <!--      </template>-->\r\n      <template slot=\"infoForm\" slot-scope=\"scope\">\r\n        <!--        <div style=\"border-bottom: 1px solid #eee;height: 40px;line-height:40px;\">商品信息</div>-->\r\n        <avue-crud :option=\"infoOption\" :data=\"infoData\">\r\n          <template slot=\"header\">\r\n            <div\r\n              style=\"font-size: 16px;border-bottom: 1px solid #eee;height: 40px;line-height:40px;margin-bottom: 10px;\">\r\n              商品信息\r\n            </div>\r\n          </template>\r\n        </avue-crud>\r\n      </template>\r\n    </avue-crud>\r\n    <user-order-view ref=\"refViewBox\" :viewBox=\"viewBox\" :id=\"id\" @close=\"closeDialog\"></user-order-view>\r\n  </basic-container>\r\n</template>\r\n\r\n<script>\r\n  import {exportData, getDetail, getList} from \"@/api/contract/order/userOrder\";\r\n  import {mapGetters} from \"vuex\";\r\n  import userOrderView from \"./userOrderView\";\r\n  import {getDictByCode} from \"@/api/system/dict\";\r\n\r\n  export default {\r\n    components: {userOrderView},\r\n    data() {\r\n      return {\r\n        form: {},\r\n        query: {},\r\n        loading: true,\r\n        viewBox: false,\r\n        page: {\r\n          pageSize: 10,\r\n          currentPage: 1,\r\n          total: 0\r\n        },\r\n        selectionList: [],\r\n        appCodeDic: null,\r\n        group: [],\r\n        option: {\r\n          height: 'auto',\r\n          calcHeight: 210,\r\n          searchShow: true,\r\n          searchMenuSpan: 6,\r\n          tip: false,\r\n          border: true,\r\n          index: false,\r\n          viewBtn: true,\r\n          selection: true,\r\n          addBtn: false,\r\n          editBtn: false,\r\n          delBtn: false,\r\n          excelBtn: false,\r\n          labelWidth: \"30%\",\r\n          refreshBtn: false,\r\n          columnBtn: false,\r\n          searchShowBtn: false,\r\n          label: '基础信息',\r\n          // icon: 'el-icon-edit-outline',\r\n          column: [\r\n            // {\r\n            //   label: \"基础信息\",\r\n            //   prop: \"isDeleted\",\r\n            //   span: 24,\r\n            //   hide: true,\r\n            //   formslot: true,\r\n            //   labelslot: true,\r\n            //   order: 100,\r\n            //   labelWidth: \"100px\"\r\n            // },\r\n            {\r\n              label: \"手机号码\",\r\n              prop: \"phoneNumber\",\r\n              search: true,\r\n              display: true\r\n            },\r\n            {\r\n              label: \"邮箱\",\r\n              prop: \"mailbox\",\r\n              search: true,\r\n              display: true\r\n            },\r\n            {\r\n              label: \"订单编码\",\r\n              prop: \"orderNo\",\r\n              order: 9,\r\n              searchOrder: 9,\r\n              search: true,\r\n              display: true\r\n            },\r\n            {\r\n              label: \"产品名称\",\r\n              prop: \"goodsName\",\r\n              search: true,\r\n              searchOrder: 8,\r\n              hide: true,\r\n              display: false,\r\n            },\r\n            {\r\n              label: \"产品编码\",\r\n              prop: \"goodsNo\",\r\n              search: true,\r\n              searchOrder: 7,\r\n              hide: true,\r\n              display: false,\r\n            },\r\n            {\r\n              label: \"订单金额（元）\",\r\n              prop: \"orderAmount\",\r\n              order: 8,\r\n              display: true\r\n            },\r\n            {\r\n              label: \"订单来源\",\r\n              prop: \"appCode\",\r\n              order: 7,\r\n              search: true,\r\n              display: true,\r\n              type: \"select\",\r\n              dicUrl: this.getDicValue(this.CONSTANT.APP_CODE),\r\n              props: {\r\n                label: \"dictValue\",\r\n                value: \"dictKey\"\r\n              },\r\n              rules: [{\r\n                required: true,\r\n                message: \"请选择表现方式\",\r\n                trigger: \"blur\"\r\n              }]\r\n            },\r\n\r\n            {\r\n              label: \"订购时间\",\r\n              prop: \"orderTime\",\r\n              order: 6,\r\n              display: true\r\n            },\r\n            {\r\n              label: \"同步时间\",\r\n              prop: \"createTime\",\r\n              search: true,\r\n              searchOrder: 10,\r\n              span: 12,\r\n              format: 'yyyy-MM-dd HH:mm:ss',                  // 这是组件展示的日期格式\r\n              valueFormat: 'yyyy-MM-dd HH:mm:ss',        // 这是组件value值的格式\r\n              type: \"datetime\",\r\n              searchRange: true,\r\n              addDisplay: false, //新增时是否显示\r\n              editDisplay: false, //编辑时是否显示\r\n              viewDisplay: true, //详情时是否显示\r\n            }, {\r\n              labelWidth: 0,\r\n              label: '',\r\n              prop: 'info',\r\n              span: 24,\r\n              hide: true,\r\n              formslot: true,\r\n            }\r\n          ],\r\n        },\r\n        infoOption: {\r\n          menu: false,\r\n          addBtn: false,\r\n          refreshBtn: false,\r\n          columnBtn: false,\r\n          searchShowBtn: false,\r\n          searchIcon: false,\r\n          // label: '客户经理信息',\r\n          // icon: 'el-icon-edit-outline',\r\n          column: [\r\n            {\r\n              label: '商品编码',\r\n              prop: 'goodsNo',\r\n            },\r\n            {\r\n              label: '商品名称',\r\n              prop: 'goodsName',\r\n            },\r\n            {\r\n              label: '商品金额',\r\n              prop: 'goodsPrice',\r\n            },\r\n            {\r\n              label: '到期时间',\r\n              prop: 'expiredDate',\r\n            }\r\n          ]\r\n        },\r\n        data: []\r\n      };\r\n    },\r\n    computed: {\r\n      ...\r\n        mapGetters([\"permission\"]),\r\n      permissionList() {\r\n        return {\r\n          addBtn: this.vaildData(this.permission.userorder_add, false),\r\n          viewBtn: this.vaildData(this.permission.userorder_view, false),\r\n          editBtn: this.vaildData(this.permission.userorder_excel, false)\r\n        };\r\n      },\r\n      ids() {\r\n        let ids = [];\r\n        this.selectionList.forEach(ele => {\r\n          ids.push(ele.id);\r\n        });\r\n        return ids.join(\",\");\r\n      },\r\n      infoData() {\r\n        return this.form.info || []\r\n      }\r\n    },\r\n    methods: {\r\n      closeDialog(val) {\r\n        this.viewBox = val;\r\n        this.$emit(\"close\", false);\r\n      },\r\n      beforeOpen(done, type) {\r\n        if ([\"edit\", \"view\"].includes(type)) {\r\n          getDetail(this.form.id).then(res => {\r\n            this.form = res.data.data;\r\n            this.form.appCode = Number.parseInt(this.form.appCode);\r\n            this.form.info = res.data.data.userOrderGoodsList;\r\n          });\r\n        }\r\n        done();\r\n      }\r\n      ,\r\n      searchReset() {\r\n        this.query = {};\r\n        this.onLoad(this.page);\r\n      }\r\n      ,\r\n      searchChange(params, done) {\r\n        this.query = params;\r\n        if (params.createTime) {\r\n          params.createTimeBegin = params.createTime[0];// + \" 00:00:00\";\r\n          params.createTimeEnd = params.createTime[1];// + \" 23:59:59\";\r\n          params.createTime = null;\r\n        }\r\n        this.page.currentPage = 1;\r\n        this.onLoad(this.page, params);\r\n        done();\r\n      }\r\n      ,\r\n      selectionChange(list) {\r\n        this.selectionList = list;\r\n      }\r\n      ,\r\n      selectionClear() {\r\n        this.selectionList = [];\r\n        this.$refs.crud.toggleSelection();\r\n      }\r\n      ,\r\n      currentChange(currentPage) {\r\n        this.page.currentPage = currentPage;\r\n      }\r\n      ,\r\n      sizeChange(pageSize) {\r\n        this.page.pageSize = pageSize;\r\n      }\r\n      ,\r\n      onLoad(page, params = {}) {\r\n        this.loading = true;\r\n        this.appCodeDic = new Map();\r\n        getDictByCode(this.CONSTANT.APP_CODE).then(res => {\r\n          console.log(\"初始化字典\", res.data.data);\r\n          //组装字典\r\n          for (let i = 0; i < res.data.data.length; i++) {\r\n            this.appCodeDic.set(res.data.data[i].dictKey + \"\", res.data.data[i].dictValue);\r\n          }\r\n        });\r\n        getList(page.currentPage, page.pageSize, Object.assign(params, this.query)).then(res => {\r\n          const data = res.data.data;\r\n          this.page.total = data.total;\r\n          this.data = data.records;\r\n          for (let i = 0; i < this.data.length; i++) {\r\n            if (this.data[i].appCode && this.data[i].appCode != \"\") {\r\n              this.data[i].appCode = Number.parseInt(this.data[i].appCode);\r\n            }\r\n            // this.data[i].phoneNumber = this.data[i].phoneNumber.replace(/^(\\d{3})\\d{4}(\\d{4})$/, '$1****$2');\r\n          }\r\n          this.loading = false;\r\n          this.selectionClear();\r\n        });\r\n      },\r\n      detailView(row) {\r\n        this.viewBox = true;\r\n      },\r\n      exportExcel() {\r\n        console.log(\"导出\");\r\n\r\n        exportData(this.query).then(res => {\r\n          let downData = res.data.data;\r\n          for (let i = 0; i < downData.length; i++) {\r\n            console.log(\"字典map\", this.appCodeDic);\r\n            downData[i].appCodeName = this.appCodeDic.get(downData[i].appCode + \"\");\r\n            // downData[i].phoneNumber = downData[i].phoneNumber.replace(/^(\\d{3})\\d{4}(\\d{4})$/, '$1****$2');\r\n          }\r\n          this.$export.excel({\r\n            title: \"用户订单信息\",\r\n            columns: [\r\n              {\r\n                label: \"手机号码\",\r\n                prop: \"phoneNumber\",\r\n              },\r\n              {\r\n                label: \"邮箱\",\r\n                prop: \"mailbox\",\r\n              },\r\n              {\r\n                label: \"订单编码\",\r\n                prop: \"orderNo\",\r\n                order: 9,\r\n              },\r\n              {\r\n                label: \"订单金额（元）\",\r\n                prop: \"orderAmount\",\r\n                order: 8,\r\n                display: true\r\n              },\r\n              {\r\n                label: \"订单来源\",\r\n                prop: \"appCodeName\",\r\n                order: 7,\r\n              },\r\n              {\r\n                label: \"订购时间\",\r\n                prop: \"orderTime\",\r\n                order: 6,\r\n              },\r\n              {\r\n                label: \"同步时间\",\r\n                prop: \"createTime\",\r\n                searchOrder: 10,\r\n              },\r\n              {\r\n                label: '商品编码',\r\n                prop: 'goodsNo',\r\n              },\r\n              {\r\n                label: '商品名称',\r\n                prop: 'goodsName',\r\n              },\r\n              {\r\n                label: '商品金额',\r\n                prop: 'goodsPrice',\r\n              },\r\n              {\r\n                label: '到期时间',\r\n                prop: 'expiredDate',\r\n              }],\r\n            data: downData,\r\n          });\r\n        })\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .el-icon-arrow-right:before {\r\n    content: \"\\e6e0\";\r\n    display: none;\r\n  }\r\n\r\n  .el-collapse-item__header {\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-align: center;\r\n    align-items: center;\r\n    height: 48px;\r\n    line-height: 48px;\r\n    background-color: #FFF;\r\n    color: #303133;\r\n    cursor: none;\r\n    border-bottom: 1px solid #EBEEF5;\r\n    font-size: 13px;\r\n    font-weight: 500;\r\n    transition: border-bottom-color .3s;\r\n    outline: 0;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .el-collapse-item__wrap {\r\n    will-change: height;\r\n    background-color: #FFF;\r\n    overflow: hidden;\r\n    /* -webkit-box-sizing: border-box; */\r\n    box-sizing: border-box;\r\n    border-bottom: 1px solid #EBEEF5;\r\n    display: block;\r\n    /*pointer-events: none;*/\r\n  }\r\n\r\n  /* [style] {\r\n    display: block;\r\n  } */\r\n</style>\r\n"],"sourceRoot":"src/views/contract/order"}]}