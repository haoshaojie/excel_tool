{"remainingRequest":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\product\\components\\profitInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\src\\views\\contract\\product\\components\\profitInfo.vue","mtime":1618794737782},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\东方通\\source\\b_zwj\\xinhua-finance-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { profitRateByProdId } from \"@/api/contract/product/productitem\";\nimport { selectPartnerItems } from '@/api/partner/partner';\nexport default {\n  name: \"profitInfo\",\n  props: {\n    isView: false,\n    profitInfo: {\n      partnerId: '',\n      profitRates: [],\n      itemSourse: 1,\n      shareType: '',\n      shareResult: ''\n    }\n  },\n  data: function data() {\n    return {\n      productType: 1,\n      // 1产品类型；2产品项；3组成产品；\n      profitRules: {\n        partnerId: [{\n          required: true,\n          validator: this.checkParId,\n          trigger: 'change'\n        }],\n        shareResult: [{\n          required: true,\n          validator: this.checkShareResult,\n          trigger: 'blur'\n        }],\n        releaseScope: [{\n          required: true,\n          message: '请输入发布范围',\n          trigger: 'blur'\n        }],\n        prodId: [{\n          required: true,\n          message: '请输入发布应用',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.onLoad();\n  },\n  methods: {\n    showData: function showData(data) {\n      var _this = this;\n\n      this.profitInfo.itemSourse = data.itemSourse;\n\n      if (data.itemSourse == 2) {\n        this.profitInfo.partnerId = data.partnerId;\n        this.profitInfo.shareType = data.shareType;\n        this.profitInfo.shareResult = data.shareResult;\n\n        if (data.shareType == 2) {\n          profitRateByProdId(data.id, this.productType).then(function (res) {\n            var data = res.data.data;\n            console.log(\"profit\", data);\n            _this.profitInfo.profitRates = data;\n          });\n        }\n      }\n    },\n    itemSourseChange: function itemSourseChange(value) {\n      // 分润比例 1 自有产品 2 合作商产品\n      if (value == 1) {\n        this.profitInfo.partnerId = '';\n        this.profitInfo.shareType = '';\n      } else if (value === 2) {\n        this.profitInfo.shareType = 1;\n      }\n    },\n    shareTypeChange: function shareTypeChange(value) {\n      // 分润比例 1 固定 2 阶梯\n      if (value == 1) {\n        this.profitInfo.profitRates = [];\n      } else if (value == 2) {\n        this.profitInfo.shareResult = \"\";\n        this.profitInfo.profitRates = [{\n          beginUserRcnt: 1,\n          endUserCnt: '',\n          profirRate: ''\n        }];\n      }\n    },\n    checkParId: function checkParId(rule, value, callback) {\n      console.log(this.profitInfo.itemSourse, value);\n\n      if (this.profitInfo.itemSourse == 2) {\n        if (!this.profitInfo.partnerId) {\n          callback(new Error(\"请选择合作商\"));\n        } else {\n          callback();\n        }\n      } else {\n        callback();\n      }\n    },\n    checkShareResult: function checkShareResult(rule, value, callback) {\n      if (this.profitInfo.itemSourse == 2 && this.profitInfo.shareType == 1) {\n        if (value == '') {\n          callback(new Error(\"请输入分润比例\"));\n        } else {\n          if (value >= 1 && value <= 100) {\n            callback();\n          } else {\n            callback(new Error(\"分润比例应为1%至100%之间\"));\n          }\n        }\n      } else if (this.profitInfo.itemSourse == 2 && this.profitInfo.shareType == 2) {\n        console.log(\"校验表格内容\");\n        callback();\n      } else {\n        callback();\n      }\n    },\n    checkUserRcnt: function checkUserRcnt(row, rule, value, callback) {\n      console.log(row);\n\n      if (!value) {\n        callback(new Error(\"请输入\"));\n      } else if (value <= row.beginUserRcnt) {\n        callback(new Error(\"请大于\" + row.beginUserRcnt));\n      } else {\n        callback();\n      }\n    },\n    profitInfoAddItem: function profitInfoAddItem() {\n      var beginUserRcnt = '';\n\n      if (this.profitInfo.profitRates[this.profitInfo.profitRates.length - 1]) {\n        var row = this.profitInfo.profitRates[this.profitInfo.profitRates.length - 1];\n\n        if (row.endUserCnt) {\n          beginUserRcnt = parseInt(row.endUserCnt) + 1;\n        }\n      }\n\n      this.profitInfo.profitRates.push({\n        beginUserRcnt: beginUserRcnt,\n        endUserCnt: '',\n        profirRate: ''\n      });\n    },\n    userRcntInput: function userRcntInput(value, index) {\n      if (value) {\n        value = (value + \"\").replace(/[^\\d]/g, '');\n        this.profitInfo.profitRates[index].endUserCnt = value;\n\n        if (value && this.profitInfo.profitRates[index + 1]) {\n          this.profitInfo.profitRates[index + 1].beginUserRcnt = parseInt(value) + 1;\n        }\n      }\n    },\n    profitInfoRmItem: function profitInfoRmItem(index) {\n      this.profitInfo.profitRates.splice(index, 1);\n    },\n    onLoad: function onLoad() {\n      var _this2 = this;\n\n      selectPartnerItems().then(function (res) {\n        _this2.pars = res.data.data;\n      });\n    }\n  }\n};",{"version":3,"sources":["profitInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <el-form  ref=\"profitForm\" :rules=\"profitRules\" :model=\"profitInfo\" label-width=\"100px\" class=\"demo-form-inline\"  size=\"mini\">\r\n    <el-form-item label=\"产品来源\">\r\n      <el-col :span=\"12\">\r\n        <el-radio-group :disabled=\"isView\" v-model=\"profitInfo.itemSourse\" @change=\"itemSourseChange\">\r\n          <el-radio :label=\"1\" >自有产品</el-radio>\r\n          <el-radio :label=\"2\" >合作商产品</el-radio>\r\n        </el-radio-group>\r\n      </el-col>\r\n    </el-form-item>\r\n    <el-form-item label=\"合作商\" v-show=\"profitInfo.itemSourse==2\" prop='partnerId'>\r\n      <el-col :span=\"12\">\r\n        <el-select :disabled=\"isView\" style=\"width:100%\" v-model=\"profitInfo.partnerId\" placeholder=\"请选择合作商\">\r\n          <el-option v-for=\"(item,i) in pars\" :key=\"i\" :label=\"item.parName\" :value=\"item.id\"></el-option>\r\n        </el-select>\r\n      </el-col>\r\n    </el-form-item>\r\n    <el-form-item label=\"分润比例\" v-show=\"profitInfo.itemSourse==2\"  prop=\"shareResult\">\r\n      <el-col :span=\"12\">\r\n        <el-radio-group :disabled=\"isView\" v-model=\"profitInfo.shareType\" @change=\"shareTypeChange\">\r\n          <el-radio :label=\"1\" >固定比例</el-radio>\r\n          <el-radio :label=\"2\" >阶梯比例</el-radio>\r\n        </el-radio-group>\r\n        <template v-if=\"profitInfo.itemSourse==2 && profitInfo.shareType == 1\">\r\n          <el-input :disabled=\"isView\" placeholder=\"请输入分润比例\" type=\"number\" v-model=\"profitInfo.shareResult\">\r\n            <template slot=\"append\">%</template>\r\n          </el-input>\r\n          <el-link type=\"info\" :underline=\"false\">注：分润比例为合作商的分润比例</el-link>\r\n        </template>\r\n        <template v-if=\"profitInfo.itemSourse==2 && profitInfo.shareType == 2\">\r\n          <el-form :model=\"profitInfo\" :disabled=\"isView\" ref=\"ratesForm\" size=\"small\">\r\n          <el-table border size=\"small\"\r\n            :data=\"profitInfo.profitRates\"\r\n            style=\"width: 100%\">\r\n            <el-table-column label=\"人数范围\">\r\n              <template slot-scope=\"scope\">\r\n                <el-form-item \r\n                :prop=\"'profitRates.' + scope.$index + '.beginUserRcnt'\" \r\n                class=\"table-item\">\r\n                  <el-input  \r\n                  disabled\r\n                  v-model.number=\"scope.row.beginUserRcnt\" \r\n                  size=\"small\"\r\n                  ></el-input>\r\n                </el-form-item>\r\n                至\r\n                <el-form-item \r\n                :prop=\"'profitRates.' + scope.$index + '.endUserCnt'\" \r\n                :rules=\"[{required:true,validator:( rule, value, callback)=>{checkUserRcnt(scope.row,rule, value, callback)} ,trigger:'blur'}]\" \r\n                class=\"table-item\">\r\n                  <el-input @input=\"userRcntInput(scope.row.endUserCnt,scope.$index)\" v-model.number=\"scope.row.endUserCnt\" size=\"small\" placeholder=\"请输入\"></el-input>\r\n                </el-form-item>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"比例（%）\" width=\"120\">\r\n              <template slot-scope=\"scope\">\r\n                <el-form-item \r\n                :prop=\"'profitRates.' + scope.$index + '.profirRate'\"\r\n                :rules=\"[{required:true,message:'请输入比例',trigger:'blur'},\r\n                {pattern:/^([1-9]\\d{0,1}|100)$/, message: '请输入1-100的正整数', trigger: 'blur'}]\">\r\n                  <el-input type=\"number\" :min=\"1\" :max=\"100\" v-model.number=\"scope.row.profirRate\" size=\"small\" placeholder=\"请输入\"></el-input>\r\n                </el-form-item>\r\n              </template>\r\n            </el-table-column>>\r\n            <el-table-column v-if=\"!isView\" label=\"操作\" fixed=\"right\" width=\"80\"  class=\"table-item\">\r\n              <template slot-scope=\"scope\">\r\n                  <el-button v-if=\"scope.$index == 0\" icon=\"el-icon-circle-plus-outline\" type=\"text\" size=\"small\" @click=\"profitInfoAddItem(scope.$index, scope.row)\">新增</el-button>\r\n                  <el-button v-if=\"scope.$index > 0\" icon=\"el-icon-delete\" type=\"text\" size=\"small\" style='color: #E02020;' @click=\"profitInfoRmItem(scope.$index, scope.row)\">删除</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          </el-form>\r\n        </template>\r\n      </el-col>\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n<script>\r\nimport {profitRateByProdId} from \"@/api/contract/product/productitem\";\r\nimport {selectPartnerItems} from '@/api/partner/partner';\r\nexport default {\r\n  name:\"profitInfo\",\r\n  props:{\r\n    isView:false,\r\n    profitInfo:{\r\n      partnerId:'',\r\n      profitRates:[],\r\n      itemSourse: 1,\r\n      shareType: '',\r\n      shareResult:''\r\n    }\r\n  },\r\n  data(){\r\n      return {\r\n        productType:1,// 1产品类型；2产品项；3组成产品；\r\n        profitRules:{\r\n          partnerId:[\r\n            {required: true, validator:this.checkParId, trigger: 'change'}\r\n          ],\r\n          shareResult:[\r\n            {required: true, validator:this.checkShareResult, trigger: 'blur'}\r\n          ],\r\n          releaseScope:[\r\n            { required: true, message: '请输入发布范围', trigger: 'blur'}\r\n          ],\r\n          prodId:[\r\n            { required: true, message: '请输入发布应用', trigger: 'blur'}\r\n          ],\r\n        }\r\n      }\r\n  },\r\n  mounted(){\r\n   this.onLoad();\r\n  },\r\n  methods:{\r\n    showData(data){\r\n      this.profitInfo.itemSourse = data.itemSourse\r\n      if(data.itemSourse == 2){\r\n        this.profitInfo.partnerId = data.partnerId\r\n        this.profitInfo.shareType = data.shareType\r\n        this.profitInfo.shareResult = data.shareResult\r\n        if(data.shareType == 2){\r\n          profitRateByProdId(data.id, this.productType).then(res =>{\r\n            let data = res.data.data;\r\n            console.log(\"profit\",data)\r\n            this.profitInfo.profitRates= data\r\n          })\r\n        }\r\n        \r\n      }\r\n    },\r\n    itemSourseChange(value){\r\n        // 分润比例 1 自有产品 2 合作商产品\r\n      if (value == 1) {\r\n        this.profitInfo.partnerId='';\r\n        this.profitInfo.shareType = '';\r\n      }else if(value === 2){\r\n        this.profitInfo.shareType = 1;\r\n      }\r\n    },\r\n    shareTypeChange(value){\r\n      // 分润比例 1 固定 2 阶梯\r\n      if (value == 1) { \r\n        this.profitInfo.profitRates=[];\r\n      }else if(value == 2){\r\n        this.profitInfo.shareResult=\"\";\r\n        this.profitInfo.profitRates=[{beginUserRcnt:1,endUserCnt:'',profirRate:''}];\r\n      }\r\n    },\r\n    checkParId(rule, value, callback){\r\n      console.log(this.profitInfo.itemSourse, value)\r\n      if(this.profitInfo.itemSourse==2){\r\n        if(!this.profitInfo.partnerId){\r\n          callback(new Error(\"请选择合作商\"))\r\n        }else{\r\n          callback()\r\n        }\r\n      }else{\r\n        callback()\r\n      }\r\n    },\r\n   \r\n    checkShareResult(rule, value, callback){\r\n      if(this.profitInfo.itemSourse==2 && this.profitInfo.shareType == 1){\r\n        if(value == ''){\r\n          callback(new Error(\"请输入分润比例\"))\r\n        }else{\r\n          if(value>=1 && value <=100){\r\n            callback()\r\n          }else{\r\n            callback(new Error(\"分润比例应为1%至100%之间\"))\r\n          }\r\n        }\r\n      }else if(this.profitInfo.itemSourse==2 && this.profitInfo.shareType == 2){\r\n        console.log(\"校验表格内容\")\r\n        callback()\r\n      }else{\r\n        callback()\r\n      }\r\n    },\r\n    checkUserRcnt(row, rule, value, callback){\r\n      console.log(row)\r\n      if(!value){\r\n        callback(new Error(\"请输入\"))\r\n      }else if(value<=row.beginUserRcnt){\r\n          callback(new Error(\"请大于\"+row.beginUserRcnt))\r\n      }else{\r\n        callback()\r\n      }\r\n      \r\n    },\r\n    profitInfoAddItem(){\r\n      let beginUserRcnt='';\r\n      if(this.profitInfo.profitRates[this.profitInfo.profitRates.length-1]){\r\n        let row = this.profitInfo.profitRates[this.profitInfo.profitRates.length-1]\r\n        if(row.endUserCnt){\r\n          beginUserRcnt = parseInt(row.endUserCnt)+1\r\n        }\r\n      }\r\n      this.profitInfo.profitRates.push({beginUserRcnt:beginUserRcnt, endUserCnt:'',profirRate:''})\r\n    },\r\n    userRcntInput(value, index){\r\n      if(value){\r\n        value=(value+\"\").replace(/[^\\d]/g,'')\r\n        this.profitInfo.profitRates[index].endUserCnt=value\r\n        if(value && this.profitInfo.profitRates[index+1]){\r\n          this.profitInfo.profitRates[index+1].beginUserRcnt = parseInt(value) +1\r\n        }\r\n      }\r\n    },\r\n    profitInfoRmItem(index){\r\n      this.profitInfo.profitRates.splice(index, 1)\r\n    },\r\n    onLoad() {\r\n      selectPartnerItems().then(res => {\r\n        this.pars=res.data.data\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.table-item{\r\n  width: 40%;\r\n  display: inline-block;\r\n  margin-bottom: 13px;\r\n}\r\n</style>"],"sourceRoot":"src/views/contract/product/components"}]}